<!doctype html><html lang="zh"><head><base href="https://labuladong.online/"><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="stylesheet" href="/algo-visualize/style.css"><meta name="theme-color" content="#000000"/><link rel="icon" type="image/png" sizes="32x32" href="/algo-visualize/favicon/logo.png"><link rel="manifest" href="/algo-visualize/favicon/site.webmanifest?v=zX7d5E9bGk"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><title>区域和检索 - 数组不可变 | labuladong 算法可视化</title><meta name="description" content="力扣题目 303. 区域和检索 - 数组不可变 的算法可视化。"><script defer="defer" src="/algo-visualize/static/js/main.bac1f995.js"></script><link href="/algo-visualize/static/css/main.044a6ffd.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="error-message" style="display: none; color: red; text-align: center; margin-top: 20px;"><p>页面加载失败，请尝试清除浏览器缓存并刷新页面。</p><p>Error occurred when loading the page, please try to clear browser cache and refresh the page.</p></div><script>window.__viz = {
        data: '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'
    }</script><div style="display: none"><pre><code class="language-javascript">class PrefixSum {
    constructor(nums) {
        // 前缀和数组
        // @visualize global
        let preSum = new Array(nums.length + 1).fill(0);

        // preSum[0] = 0，便于计算累加和
        preSum[0] = 0;

        // 输入一个数组，构造前缀和
        for (let i = 1; i &lt; preSum.length; i++) {
            // @visualize color *preSum[i-1] *nums[i-1] #9542ac
            // @visualize color *preSum[i] #289c2c
            // 计算 nums 的累加和
            preSum[i] = preSum[i - 1] + nums[i - 1];
            // @visualize color *preSum[i-1] *nums[i-1] *preSum[i] #unset
        }

        this.preSum = preSum;
    }

    // 查询闭区间 [left, right] 的累加和
    sumRange(left, right) {
        // @visualize color *this.preSum[left] *this.preSum[right+1] #7e???? left
        return this.preSum[right + 1] - this.preSum[left];
    }
}

let nums = [-2, 0, 3, -5, 2, -1]
// @visualize hide
let sum = new PrefixSum(nums);
// 0 + 3 + -5 = -2
console.log(sum.sumRange(1, 3));
// 3 + -5 + 2 + -1 = -1
console.log(sum.sumRange(2, 5));
</code></pre></div><div id="root"></div><script async src="https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js"></script><script>window.onerror = function (message, source, lineno, colno, error) {
        const root = document.getElementById('root');
        if (!root || !root.innerHTML.trim()) {
            console.log('window on error:', error, message)
            document.getElementById('error-message').style.display = 'block';
        }
    };

    // MutationObserver to monitor changes in #root
    const observer = new MutationObserver(function (mutations) {
        const root = document.getElementById('root');
        if (root && root.innerHTML.trim()) {
            document.getElementById('error-message').style.display = 'none';
            window.onerror = null; // Remove the window.onerror listener
            observer.disconnect(); // Stop observing
        }
    });

    // Observe changes in the child list of #root
    observer.observe(document.getElementById('root'), {
        childList: true,
        subtree: true
    });</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"6f08fc385f864c1ba2f3a406756e83c1","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body></html>