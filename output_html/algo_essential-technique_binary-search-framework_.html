<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head><base href="https://labuladong.online/">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.23" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.88" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"二分搜索算法核心代码模板","image":["https://labuladong.online/algo/logo.svg"],"dateModified":null,"author":[{"@type":"Person","name":"labuladong","url":"https://github.com/labuladong"}],"description":"本文总结了二分搜索的代码模板和几种常见的写法，分析每种写法的差异，确保你能准确写出二分搜索代码。"}</script><meta property="og:url" content="https://labuladong.online/algo/essential-technique/binary-search-framework/"><meta property="og:site_name" content="labuladong 的算法笔记"><meta property="og:title" content="二分搜索算法核心代码模板"><meta property="og:description" content="本文总结了二分搜索的代码模板和几种常见的写法，分析每种写法的差异，确保你能准确写出二分搜索代码。"><meta property="og:type" content="article"><meta property="og:image" content="https://labuladong.online/algo/logo.svg"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:tag" content="核心框架"><meta property="article:tag" content="二分查找"><meta property="article:tag" content="linked-two-pointer"><meta property="article:tag" content="数组"><link rel="alternate" hreflang="en-us" href="https://labuladong.online/algo/en/essential-technique/binary-search-framework/"><link rel="canonical" href="https://labuladong.online/algo/essential-technique/binary-search-framework/"><script>
        (function () {
    const host = window.location.host;
    if (host === 'labuladong.gitee.io' || host === 'labuladong.github.io') {
        document.open();
        document.write('当前网址已弃用，<span>正在跳转到最新网址 <a href="https://labuladong.online/algo/">labuladong.online</a></span>');
        document.close();
        setTimeout(() => {
            window.location.href = 'https://labuladong.online/algo/';
        }, 3000);
    }
})();
        </script><script src="https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js" type="text/javascript" async></script><meta name="application-name" content="labuladong 的算法笔记"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#46bd87"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/algo/favicon.ico"><link rel="manifest" href="/algo/manifest.webmanifest" crossorigin="use-credentials"><link rel="icon" href="/algo/assets/icon/avatar.png" type="image/png" sizes="72x72"><link rel="icon" href="/algo/assets/icon/avatar.png" type="image/png" sizes="152x152"><link rel="icon" href="/algo/assets/icon/avatar.png" type="image/png" sizes="192x192"><link rel="icon" href="/algo/assets/icon/avatar.png" type="image/png" sizes="256x256"><link rel="icon" href="/algo/assets/icon/avatar.png" type="image/png" sizes="512x512"><link rel="apple-touch-icon" href="/algo/assets/icon/avatar.png"><title>二分搜索算法核心代码模板 | labuladong 的算法笔记</title><meta name="description" content="本文总结了二分搜索的代码模板和几种常见的写法，分析每种写法的差异，确保你能准确写出二分搜索代码。">
    <link rel="preload" href="/algo/assets/style-JSiBg4Um.css" as="style"><link rel="stylesheet" href="/algo/assets/style-JSiBg4Um.css">
    <link rel="modulepreload" href="/algo/assets/app-DoHzhCkd.js"><link rel="modulepreload" href="/algo/assets/index.html-Bf8C-ZwP.js"><link rel="modulepreload" href="/algo/assets/3-EXwwxCF1.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/algo/" aria-label="返回首页"><img class="vp-nav-logo" src="/algo/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">labuladong 的算法笔记</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/algo/home/" aria-label="主站"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-home" height="1em" sizing="height"></iconify-icon><!--]-->主站<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/algo/intro/site-vip/" aria-label="本站会员"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-diamond" height="1em" sizing="height"></iconify-icon><!--]-->本站会员<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/algo/intro/bug-report/" aria-label="反馈问题"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-bug-report" height="1em" sizing="height"></iconify-icon><!--]-->反馈问题<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="更新日志"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-build-circle" height="1em" sizing="height"></iconify-icon>更新日志<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algo/changelog/website/" aria-label="网站更新日志"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-web" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->网站更新日志<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algo/changelog/visualize/" aria-label="可视化面板更新日志"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-auto-fix-high" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->可视化面板更新日志<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algo/changelog/chrome/" aria-label="Chrome 插件更新日志"><!--[--><iconify-icon class="vp-icon" icon="mingcute:chrome-line" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Chrome 插件更新日志<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algo/changelog/vscode/" aria-label="vscode 插件更新日志"><!--[--><iconify-icon class="vp-icon" icon="tabler:brand-vscode" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->vscode 插件更新日志<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algo/changelog/jetbrain/" aria-label="Jetbrains 插件更新日志"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-rocket-launch" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Jetbrains 插件更新日志<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/algo/essential-technique/binary-search-framework/" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algo/en/essential-technique/binary-search-framework/" aria-label="English"><!---->English<!----></a></li></ul></button></div></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/labuladong/fucking-algorithm" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar data-v-50e65396><!----><ul class="vp-sidebar-links" data-v-50e65396><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/home/" aria-label="本站简介"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-menu-book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->本站简介<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">配套学习工具使用指南</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">针对初学和速成的学习规划</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">入门：编程语言基础及练习</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">基础：数据结构及排序精讲</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">第零章、核心刷题框架汇总</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">第一章、经典数据结构算法</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">手把手刷链表算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">手把手刷数组算法</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/essential-technique/array-two-pointers-summary-2/" aria-label="双指针技巧秒杀七道数组题目"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-menu-book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->双指针技巧秒杀七道数组题目<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/game/match-three/" aria-label="【游戏】消消乐游戏"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:videogame-asset" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->【游戏】消消乐游戏<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/practice-in-action/2d-array-traversal-summary/" aria-label="二维数组的花式遍历技巧"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-lock" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->二维数组的花式遍历技巧<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/problem-set/array-two-pointers/" aria-label="【练习】数组双指针经典习题"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:exercise-outline" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->【练习】数组双指针经典习题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/game/life-game/" aria-label="【游戏】生命游戏"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:videogame-asset" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->【游戏】生命游戏<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/practice-in-action/nsum/" aria-label="一个方法团灭 nSum 问题"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-lock" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->一个方法团灭 nSum 问题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/data-structure/prefix-sum/" aria-label="小而美的算法技巧：前缀和数组"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-menu-book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->小而美的算法技巧：前缀和数组<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/problem-set/perfix-sum/" aria-label="【练习】前缀和技巧经典习题"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:exercise-outline" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->【练习】前缀和技巧经典习题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/data-structure/diff-array/" aria-label="小而美的算法技巧：差分数组"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-menu-book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->小而美的算法技巧：差分数组<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/essential-technique/sliding-window-framework-2/" aria-label="滑动窗口算法核心代码模板"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-menu-book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->滑动窗口算法核心代码模板<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/problem-set/sliding-window/" aria-label="【练习】滑动窗口算法经典习题"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:exercise-outline" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->【练习】滑动窗口算法经典习题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/practice-in-action/rabinkarp/" aria-label="滑动窗口延伸：Rabin Karp 字符匹配算法"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-lock" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->滑动窗口延伸：Rabin Karp 字符匹配算法<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link vp-sidebar-page active" href="/algo/essential-technique/binary-search-framework/" aria-label="二分搜索算法核心代码模板"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-menu-book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->二分搜索算法核心代码模板<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/frequency-interview/binary-search-in-action/" aria-label="实际运用二分搜索时的思维框架"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-lock" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->实际运用二分搜索时的思维框架<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/problem-set/binary-search/" aria-label="【练习】二分搜索算法经典习题"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:exercise-outline" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->【练习】二分搜索算法经典习题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/frequency-interview/random-pick-with-weight/" aria-label="带权重的随机选择算法"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-lock" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->带权重的随机选择算法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/algo/practice-in-action/advantage-shuffle/" aria-label="田忌赛马背后的算法决策"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-lock" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->田忌赛马背后的算法决策<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">经典队列/栈算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">手把手刷二叉树算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">二叉树算法习题汇总</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">二叉树的拓展延伸</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">经典数据结构设计</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">经典图算法</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">第二章、经典暴力搜索算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">第三章、经典动态规划算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">第四章、其他常见算法技巧</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">附录</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----><div class="slot-demo-block" style="cursor: pointer;background: var(--detail-c-bg);" data-v-50e65396><iconify-icon class="font-icon icon" icon="ic:twotone-delete" data-v-50e65396></iconify-icon>清除阅读历史</div></aside><!--[--><main id="main-content" class="vp-page" data-v-95bd7423><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->二分搜索算法核心代码模板</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/labuladong" target="_blank" rel="noopener noreferrer">labuladong</a></span><span property="author" content="labuladong"></span></span><span class="page-original-info">原创</span><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 6030 字</span><meta property="wordCount" content="6030"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><div style="display:none;"><h3 tabindex="-1"> 34. 在排序数组中查找元素的第一个和最后一个位置 https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array </h3><h3 tabindex="-1"> 704. 二分查找 https://leetcode.cn/problems/binary-search </h3><h3 tabindex="-1"> 剑指 Offer 53 - I. 在排序数组中查找数字 I https://leetcode.cn/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof </h3></div><div class="hint-container note"><p class="hint-container-title">本文讲解的例题</p><table><thead><tr><th style="text-align:center;">LeetCode</th><th style="text-align:center;">力扣</th><th style="text-align:center;">难度</th></tr></thead><tbody><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener noreferrer">34. Find First and Last Position of Element in Sorted Array</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener noreferrer">34. 在排序数组中查找元素的第一个和最后一个位置</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/binary-search/" target="_blank" rel="noopener noreferrer">704. Binary Search</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/binary-search/" target="_blank" rel="noopener noreferrer">704. 二分查找</a></td><td style="text-align:center;">🟢</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;"><a href="https://leetcode.cn/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/" target="_blank" rel="noopener noreferrer">剑指 Offer 53 - I. 在排序数组中查找数字 I</a></td><td style="text-align:center;">🟢</td></tr></tbody></table></div><div class="hint-container info"><p class="hint-container-title">前置知识</p><p>阅读本文前，你需要先学习：</p><ul><li><a class="route-link" href="/algo/data-structure-basic/array-basic/">数组基础</a></li></ul></div><p>本文是旧文 <a href="https://mp.weixin.qq.com/s/uA2suoVykENmCQcKFMOSuQ" target="_blank" rel="noopener noreferrer">二分搜索详解</a> 的修订版，添加了对二分搜索算法更详细的分析。</p><p>先给大家讲个笑话乐呵一下：</p><p>有一天阿东到图书馆借了 <code>N</code> 本书，出图书馆的时候，警报响了，于是保安把阿东拦下，要检查一下哪本书没有登记出借。阿东正准备把每一本书在报警器下过一下，以找出引发警报的书，但是保安露出不屑的眼神：你连二分查找都不会吗？</p><p>于是保安把书分成两堆，让第一堆过一下报警器，报警器响，这说明引起报警的书包含在里面；于是再把这堆书分成两堆，把第一堆过一下报警器，报警器又响，继续分成两堆……</p><p>最终，检测了 <code>logN</code> 次之后，保安成功的找到了那本引起警报的书，露出了得意和嘲讽的笑容。于是阿东背着剩下的书走了。</p><p>从此，图书馆丢了 <code>N - 1</code> 本书（手动狗头）。</p><p>二分查找并不简单，Knuth 大佬（发明 KMP 算法的那位）都说二分查找：<strong>思路很简单，细节是魔鬼</strong>。很多人喜欢拿整型溢出的 bug 说事儿，但是二分查找真正的坑根本就不是那个细节问题，而是在于到底要给 <code>mid</code> 加一还是减一，while 里到底用 <code>&lt;=</code> 还是 <code>&lt;</code>。</p><p>你要是没有正确理解这些细节，写二分肯定就是玄学编程，有没有 bug 只能靠菩萨保佑，谁写谁知道。</p><p>本文就来探究几个最常用的二分查找场景：寻找一个数、寻找左侧边界、寻找右侧边界。而且，我们就是要深入细节，比如不等号是否应该带等号，<code>mid</code> 是否应该加一等等。分析这些细节的差异以及出现这些差异的原因，保证你能灵活准确地写出正确的二分查找算法。</p><p>另外再声明一下，对于二分搜索的每一个场景，本文还会探讨多种代码写法，目的是为了让你理解出现这些细微差异的本质原因，最起码你看到别人的代码时不会懵逼。实际上这些写法没有优劣之分，你喜欢哪种就用哪种好了。</p><h2 id="零、二分查找框架" tabindex="-1"><a class="header-anchor" href="#零、二分查找框架"><span>零、二分查找框架</span></a></h2><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-102-0" aria-selected="true">java</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-102-1" aria-selected="false">cpp</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-102-2" aria-selected="false">python</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-102-3" aria-selected="false">go</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-102-4" aria-selected="false">javascript</button></div><!--[--><div class="vp-code-tab active" id="codetab-102-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binarySearch</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = ...;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(...) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ...;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-102-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binarySearch</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">() - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (...) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-102-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binarySearch</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ...:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            ...</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = ...</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = ...</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-102-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binarySearch</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">-</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)/</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-102-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binarySearch</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">   while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (...) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ...;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><strong>分析二分查找的一个技巧是：不要出现 else，而是把所有情况用 else if 写清楚，这样可以清楚地展现所有细节</strong>。本文都会使用 else if，旨在讲清楚，读者理解后可自行简化。</p><p>其中 <code>...</code> 标记的部分，就是可能出现细节问题的地方，当你见到一个二分查找的代码时，首先注意这几个地方。后文用实例分析这些地方能有什么样的变化。</p><p><strong>另外提前说明一下，计算 <code>mid</code> 时需要防止溢出</strong>，代码中 <code>left + (right - left) / 2</code> 就和 <code>(left + right) / 2</code> 的结果相同，但是有效防止了 <code>left</code> 和 <code>right</code> 太大，直接相加导致溢出的情况。</p><h2 id="一、寻找一个数-基本的二分搜索" tabindex="-1"><a class="header-anchor" href="#一、寻找一个数-基本的二分搜索"><span>一、寻找一个数（基本的二分搜索）</span></a></h2><p>这个场景是最简单的，可能也是大家最熟悉的，即搜索一个数，如果存在，返回其索引，否则返回 -1。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-134-0" aria-selected="true">java</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-134-1" aria-selected="false">cpp</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-134-2" aria-selected="false">python</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-134-3" aria-selected="false">go</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-134-4" aria-selected="false">javascript</button></div><!--[--><div class="vp-code-tab active" id="codetab-134-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> Solution</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 标准的二分搜索框架，搜索目标元素的索引，若不存在则返回 -1</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    public</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // 注意</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">            int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">                return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid;   </span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">                // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">                left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">                // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">                right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-134-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> Solution</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">public:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 标准的二分搜索框架，搜索目标元素的索引，若不存在则返回 -1</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // 注意</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">() - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">            int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">                return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid;   </span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">                // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">                left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">                // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">                right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-134-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> Solution</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 标准的二分搜索框架，搜索目标元素的索引，若不存在则返回 -1</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">self</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        # 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        right = </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt;= right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">                return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">                # 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">                left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">                # 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">                right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-134-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 标准的二分搜索框架，搜索目标元素的索引，若不存在则返回 -1</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">-</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)/</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-134-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 标准的二分搜索框架，搜索目标元素的索引，若不存在则返回 -1</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    let</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    let</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        let</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] === </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><div data-v-ee1a9bd0><a style="display:none;" href="" data-v-ee1a9bd0> Algorithm visualize </a><details id="div_binary-search" class="hint-container details" data-v-ee1a9bd0><summary style="font-size:large;" data-v-ee1a9bd0><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-ee1a9bd0><path fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3" data-v-ee1a9bd0></path><path fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z" data-v-ee1a9bd0></path></svg>   <strong data-v-ee1a9bd0>算法可视化面板</strong><svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left:auto;margin-right:10px;" data-v-ee1a9bd0><path fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z" data-v-ee1a9bd0></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right:10px;" data-v-ee1a9bd0><path fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z" data-v-ee1a9bd0></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-ee1a9bd0><path fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z" data-v-ee1a9bd0></path></svg><span style="display:none;" class="copy-feedback" data-v-ee1a9bd0>Link copied!</span></summary><div class="resizable" style="height:70vh;" data-v-ee1a9bd0><iframe title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-search" src="" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow:auto;" data-v-ee1a9bd0></iframe></div></details></div><p>这段代码可以解决力扣第 704 题「<a href="https://leetcode.cn/problems/binary-search/" target="_blank" rel="noopener noreferrer">二分查找</a>」，但我们深入探讨一下其中的细节。</p><h3 id="为什么-while-循环的条件是-而不是" tabindex="-1"><a class="header-anchor" href="#为什么-while-循环的条件是-而不是"><span>为什么 while 循环的条件是 <code>&lt;=</code> 而不是 <code>&lt;</code>？</span></a></h3><p>答：因为初始化 <code>right</code> 的赋值是 <code>nums.length - 1</code>，即最后一个元素的索引，而不是 <code>nums.length</code>。</p><p>这二者可能出现在不同功能的二分查找中，区别是：前者相当于两端都闭区间 <code>[left, right]</code>，后者相当于左闭右开区间 <code>[left, right)</code>。因为索引大小为 <code>nums.length</code> 是越界的，所以我们把 <code>right</code> 这一边视为开区间。</p><p>我们这个算法中使用的是前者 <code>[left, right]</code> 两端都闭的区间。<strong>这个区间其实就是每次进行搜索的区间</strong>。</p><p>什么时候应该停止搜索呢？当然，找到了目标值的时候可以终止：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums[mid] == target)</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>但如果没找到，就需要 while 循环终止，然后返回 -1。那 while 循环什么时候应该终止？<strong>搜索区间为空的时候应该终止</strong>，意味着你没得找了，就等于没找到嘛。</p><p><code>while(left &lt;= right)</code> 的终止条件是 <code>left == right + 1</code>，写成区间的形式就是 <code>[right + 1, right]</code>，或者带个具体的数字进去 <code>[3, 2]</code>，可见<strong>这时候区间为空</strong>，因为没有数字既大于等于 3 又小于等于 2 的吧。所以这时候 while 循环终止是正确的，直接返回 -1 即可。</p><p><code>while(left &lt; right)</code> 的终止条件是 <code>left == right</code>，写成区间的形式就是 <code>[right, right]</code>，或者带个具体的数字进去 <code>[2, 2]</code>，<strong>这时候区间非空</strong>，还有一个数 2，但此时 while 循环终止了。也就是说区间 <code>[2, 2]</code> 被漏掉了，索引 2 没有被搜索，如果这时候直接返回 -1 就是错误的。</p><p>当然，如果你非要用 <code>while(left &lt; right)</code> 也可以，我们已经知道了出错的原因，就打个补丁好了：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为什么是-left-mid-1-right-mid-1" tabindex="-1"><a class="header-anchor" href="#为什么是-left-mid-1-right-mid-1"><span>为什么是 <code>left = mid + 1</code>，<code>right = mid - 1</code>？</span></a></h3><p>为什么 <code>left = mid + 1</code>，<code>right = mid - 1</code>？我看有的代码是 <code>right = mid</code> 或者 <code>left = mid</code>，没有这些加加减减，到底怎么回事，怎么判断？</p><p>答：这也是二分查找的一个难点，不过只要你能理解前面的内容，就能够很容易判断。</p><p>刚才明确了「搜索区间」这个概念，而且本算法的搜索区间是两端都闭的，即 <code>[left, right]</code>。那么当我们发现索引 <code>mid</code> 不是要找的 <code>target</code> 时，下一步应该去搜索哪里呢？</p><p>当然是去搜索区间 <code>[left, mid-1]</code> 或者区间 <code>[mid+1, right]</code> 对不对？<strong>因为 <code>mid</code> 已经搜索过，应该从搜索区间中去除</strong>。</p><h3 id="此算法有什么缺陷" tabindex="-1"><a class="header-anchor" href="#此算法有什么缺陷"><span>此算法有什么缺陷？</span></a></h3><p>答：至此，你应该已经掌握了该算法的所有细节，以及这样处理的原因。但是，这个算法存在局限性。</p><p>比如说给你有序数组 <code>nums = [1,2,2,2,3]</code>，<code>target</code> 为 2，此算法返回的索引是 2，没错。但是如果我想得到 <code>target</code> 的左侧边界，即索引 1，或者我想得到 <code>target</code> 的右侧边界，即索引 3，这样的话此算法是无法处理的。</p><p>这样的需求很常见，<strong>你也许会说，找到一个 <code>target</code>，然后向左或向右线性搜索不行吗？可以，但是不好，因为这样难以保证二分查找对数级的复杂度了</strong>。</p><p>我们后续的算法就来讨论这两种二分查找的算法。</p><h2 id="二、寻找左侧边界的二分搜索" tabindex="-1"><a class="header-anchor" href="#二、寻找左侧边界的二分搜索"><span>二、寻找左侧边界的二分搜索</span></a></h2><p>以下是最常见的代码形式，其中的标记是需要注意的细节：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-220-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-220-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-220-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-220-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-220-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-220-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-220-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-220-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    right = </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt; right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-220-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-220-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="为什么-while-中是-而不是" tabindex="-1"><a class="header-anchor" href="#为什么-while-中是-而不是"><span>为什么 while 中是 <code>&lt;</code> 而不是 <code>&lt;=</code>？</span></a></h3><p>答：用相同的方法分析，因为 <code>right = nums.length</code> 而不是 <code>nums.length - 1</code>。因此每次循环的「搜索区间」是 <code>[left, right)</code> 左闭右开。</p><p><code>while(left &lt; right)</code> 终止的条件是 <code>left == right</code>，此时搜索区间 <code>[left, left)</code> 为空，所以可以正确终止。</p><div class="hint-container info"><p class="hint-container-title">Info</p><p>这里先要说一个搜索左右边界和上面这个算法的一个区别，也是很多读者问的：<strong>刚才的 <code>right</code> 不是 <code>nums.length - 1</code> 吗，为啥这里非要写成 <code>nums.length</code> 使得「搜索区间」变成左闭右开呢</strong>？</p><p>因为对于搜索左右侧边界的二分查找，这种写法比较普遍，我就拿这种写法举例了，保证你以后遇到这类代码可以理解。你非要用两端都闭的写法反而更简单，我会在后面写相关的代码，把三种二分搜索都用一种两端都闭的写法统一起来，你耐心往后看就行了。</p></div><h3 id="target-不存在时返回什么" tabindex="-1"><a class="header-anchor" href="#target-不存在时返回什么"><span><code>target</code> 不存在时返回什么？</span></a></h3><p>如果 <code>nums</code> 中不存在 <code>target</code> 这个值，计算出来的这个索引含义是什么？如果我想让它返回 -1，怎么做？</p><div class="hint-container important"><p class="hint-container-title">当 <code>target</code> 不存在时，<code>left_bound</code> 返回值的含义</p><p>这是一个很好且很重要的问题，你把这个地方理解了，在二分搜索的实际应用场景中就不会懵逼。</p><p>直接说结论：<strong>如果 <code>target</code> 不存在，搜索左侧边界的二分搜索返回的索引是大于 <code>target</code> 的最小索引</strong>。</p><p>举个例子，<code>nums = [2,3,5,7], target = 4</code>，<code>left_bound</code> 函数返回值是 2，因为元素 5 是大于 4 的最小元素。</p><p>有点绕晕了是吧？这个 <code>left_bound</code> 函数明明是搜索左边界的，但是当 <code>target</code> 不存在的时候，却返回的是大于 <code>target</code> 的最小索引。这个结论不用死记，你要是拿不准，简单举个例子就能得到这个结论了。</p><p>所以跟你说二分搜索这个东西思路很简单，细节是魔鬼嘛，里面的坑太多了。要是真想考你，总有办法可以把你考到怀疑人生。</p><p>不是我故意把代码模板总结的这么复杂，而是二分搜索本身就很复杂，这些细节是不可能绕开的，如果你之前没有了解过这些细节，只能说明你之前学得不扎实。就算不用我总结的模板，你也必须搞清楚当 <code>target</code> 不存在时算法的行为，否则出了 bug 你都不知道咋改，真有这么严重。</p><p>话说回来，<code>left_bound</code> 的这个行为有一个好处。比方说现在让你写一个 <code>floor</code> 函数，就可以直接用 <code>left_bound</code> 函数来实现：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 在一个有序数组中，找到「小于 target 的最大元素的索引」</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 比如说输入 nums = [1,2,2,2,3]，target = 2，函数返回 0，因为 1 是小于 2 的最大元素。</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 再比如输入 nums = [1,2,3,5,6]，target = 4，函数返回 2，因为 3 是小于 4 的最大元素。</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 当 target 不存在，比如输入 [4,6,8,10], target = 7</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // left_bound 返回 2，减一就是 1，元素 6 就是小于 7 的最大元素</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 当 target 存在，比如输入 [4,6,8,8,8,10], target = 8</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // left_bound 返回 2，减一就是 1，元素 6 就是小于 8 的最大元素</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums, target) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后，我的建议是，如果你必须手写二分代码，那么你一定要了解清楚代码的种种行为，本文总结的框架就是在帮你理清这里面的细节。如果非必要，不要自己手写，尽可能用编程语言提供的标准库函数，可以节约时间，而且标准库函数的行为在文档里都有明确的说明，不容易出错。</p></div><p>如果想让 <code>target</code> 不存在时返回 -1 其实很简单，在返回的时候额外判断一下 <code>nums[left]</code> 是否等于 <code>target</code> 就行了，如果不等于，就说明 <code>target</code> 不存在。需要注意的是，访问数组索引之前要保证索引不越界：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 如果索引越界，说明数组中无目标元素，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 提示：其实上面的 if 中 left &lt; 0 这个判断可以省略，因为对于这个算法，left 不可能小于 0</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 你看这个算法执行的逻辑，left 初始化就是 0，且只可能一直往右走，那么只可能在右侧越界</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 不过我这里就同时判断了，因为在访问数组索引之前保证索引在左右两端都不越界是一个好习惯，没有坏处</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 另一个好处是让二分的模板更统一，降低你的记忆成本，因为等会儿寻找右边界的时候也有类似的出界判断</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为什么是-left-mid-1-和-right-mid" tabindex="-1"><a class="header-anchor" href="#为什么是-left-mid-1-和-right-mid"><span>为什么是 <code>left = mid + 1</code> 和 <code>right = mid</code>？</span></a></h3><p>为什么 <code>left = mid + 1</code>，<code>right = mid</code> ？和之前的算法不一样？</p><p>答：这个很好解释，因为我们的「搜索区间」是 <code>[left, right)</code> 左闭右开，所以当 <code>nums[mid]</code> 被检测之后，下一步应该去 <code>mid</code> 的左侧或者右侧区间搜索，即 <code>[left, mid)</code> 或 <code>[mid + 1, right)</code>。</p><h3 id="为什么该算法能够搜索左侧边界" tabindex="-1"><a class="header-anchor" href="#为什么该算法能够搜索左侧边界"><span>为什么该算法能够搜索左侧边界？</span></a></h3><p>答：关键在于对于 <code>nums[mid] == target</code> 这种情况的处理：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        right = mid;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>可见，找到 target 时不要立即返回，而是缩小「搜索区间」的上界 <code>right</code>，在区间 <code>[left, mid)</code> 中继续搜索，即不断向左收缩，达到锁定左侧边界的目的。</p><h3 id="为什么返回-left-而不是-right" tabindex="-1"><a class="header-anchor" href="#为什么返回-left-而不是-right"><span>为什么返回 <code>left</code> 而不是 <code>right</code>？</span></a></h3><p>答：都是一样的，因为 while 终止的条件是 <code>left == right</code>。</p><h3 id="能否统一成两端都闭的搜索区间" tabindex="-1"><a class="header-anchor" href="#能否统一成两端都闭的搜索区间"><span>能否统一成两端都闭的搜索区间？</span></a></h3><p>能不能想办法把 <code>right</code> 变成 <code>nums.length - 1</code>，也就是继续使用两边都闭的「搜索区间」？这样就可以和第一种二分搜索在某种程度上统一起来了。</p><p>答：当然可以，只要你明白了「搜索区间」这个概念，就能有效避免漏掉元素，随便你怎么改都行。下面我们严格根据逻辑来修改：</p><p>因为你非要让搜索区间两端都闭，所以 <code>right</code> 应该初始化为 <code>nums.length - 1</code>，while 的终止条件应该是 <code>left == right + 1</code>，也就是其中应该用 <code>&lt;=</code>：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-328-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-328-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-328-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-328-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-328-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-328-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // if else ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-328-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">() - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // if else ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-328-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt;= right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        # if else ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-328-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">-</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)/</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // if else ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-328-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // if else ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>因为搜索区间是两端都闭的，且现在是搜索左侧边界，所以 <code>left</code> 和 <code>right</code> 的更新逻辑如下：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-348-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-348-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-348-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-348-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-348-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-348-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-348-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-348-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-348-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-348-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>和刚才相同，如果想在找不到 <code>target</code> 的时候返回 -1，那么检查一下 <code>nums[left]</code> 和 <code>target</code> 是否相等即可：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-368-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-368-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-368-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-368-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-368-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-368-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 此时 target 比所有数都大，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-368-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 此时 target 比所有数都大，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()) </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[left] == target ? left : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-368-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"># 此时 target 比所有数都大，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left == </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums):</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"># 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-368-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 此时 target 比所有数都大，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> == </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-368-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 在左指针到达数组末尾时，target 一定比数组中所有数都大，返回 -1。</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> === </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 如果找到了 target，返回它的下标，否则返回 -1。</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] === </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ? </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>至此，整个算法就写完了，完整代码如下：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-388-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-388-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-388-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-388-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-388-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-388-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 如果越界，target 肯定不存在，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-388-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">() - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 如果越界，target 肯定不存在，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[left] == target ? left : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-388-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt;= right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 如果越界，target 肯定不存在，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> or</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums):</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-388-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 将给定的数字 nums 搜索 target 的左侧边界</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 如果越界，target 肯定不存在，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">        // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-388-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 搜索区间为 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 搜索区间变为 [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 收缩右侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 如果越界，target 肯定不存在，返回 -1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ? </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><div data-v-ee1a9bd0><a style="display:none;" href="" data-v-ee1a9bd0> Algorithm visualize </a><details id="div_binary-search-left-bound" class="hint-container details" data-v-ee1a9bd0><summary style="font-size:large;" data-v-ee1a9bd0><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-ee1a9bd0><path fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3" data-v-ee1a9bd0></path><path fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z" data-v-ee1a9bd0></path></svg>   <strong data-v-ee1a9bd0>算法可视化面板</strong><svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left:auto;margin-right:10px;" data-v-ee1a9bd0><path fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z" data-v-ee1a9bd0></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right:10px;" data-v-ee1a9bd0><path fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z" data-v-ee1a9bd0></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-ee1a9bd0><path fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z" data-v-ee1a9bd0></path></svg><span style="display:none;" class="copy-feedback" data-v-ee1a9bd0>Link copied!</span></summary><div class="resizable" style="height:70vh;" data-v-ee1a9bd0><iframe title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-search-left-bound" src="" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow:auto;" data-v-ee1a9bd0></iframe></div></details></div><p>这样就和第一种二分搜索算法统一了，都是两端都闭的「搜索区间」，而且最后返回的也是 <code>left</code> 变量的值。只要把住二分搜索的逻辑，两种形式大家看自己喜欢哪种记哪种吧。</p><h2 id="三、寻找右侧边界的二分查找" tabindex="-1"><a class="header-anchor" href="#三、寻找右侧边界的二分查找"><span>三、寻找右侧边界的二分查找</span></a></h2><p>类似寻找左侧边界的算法，这里也会提供两种写法，还是先写常见的左闭右开的写法，只有两处和搜索左侧边界不同：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-415-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-415-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-415-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-415-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-415-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-415-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-415-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-415-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">):</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums)</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt; right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 注意</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-415-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-415-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] === </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 注意</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 注意</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="为什么这个算法能够找到右侧边界" tabindex="-1"><a class="header-anchor" href="#为什么这个算法能够找到右侧边界"><span>为什么这个算法能够找到右侧边界？</span></a></h3><p>答：类似地，关键点还是这里：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当 <code>nums[mid] == target</code> 时，不要立即返回，而是增大「搜索区间」的左边界 <code>left</code>，使得区间不断向右靠拢，达到锁定右侧边界的目的。</p><h3 id="为什么返回-left-1" tabindex="-1"><a class="header-anchor" href="#为什么返回-left-1"><span>为什么返回 <code>left - 1</code>？</span></a></h3><p>为什么最后返回 <code>left - 1</code> 而不像左侧边界的函数，返回 <code>left</code>？而且我觉得这里既然是搜索右侧边界，应该返回 <code>right</code> 才对。</p><p>答：首先，while 循环的终止条件是 <code>left == right</code>，所以 <code>left</code> 和 <code>right</code> 是一样的，你非要体现右侧的特点，返回 <code>right - 1</code> 好了。</p><p>至于为什么要减一，这是搜索右侧边界的一个特殊点，关键在锁定右边界时的这个条件判断：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 增大 left，锁定右侧边界</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 这样想: mid = left - 1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="img-content"><img src="/algo/images/binary-search/3.jpg" alt class="myimage" loading="lazy" photo-swipe=""></div><p>因为我们对 <code>left</code> 的更新必须是 <code>left = mid + 1</code>，就是说 while 循环结束时，<code>nums[left]</code> 一定不等于 <code>target</code> 了，而 <code>nums[left-1]</code> 可能是 <code>target</code>。</p><p>至于为什么 <code>left</code> 的更新必须是 <code>left = mid + 1</code>，当然是为了把 <code>nums[mid]</code> 排除出搜索区间，这里就不再赘述。</p><h3 id="如果-target-不存在时返回什么" tabindex="-1"><a class="header-anchor" href="#如果-target-不存在时返回什么"><span>如果 <code>target</code> 不存在时返回什么？</span></a></h3><p>如果 <code>nums</code> 中不存在 <code>target</code> 这个值，计算出来的这个索引含义是什么？如果我想让它返回 -1，怎么做？</p><div class="hint-container important"><p class="hint-container-title">当 <code>target</code> 不存在时，<code>right_bound</code> 返回值的含义</p><p>直接说结论，和前面讲的 <code>left_bound</code> 相反：<strong>如果 <code>target</code> 不存在，搜索右侧边界的二分搜索返回的索引是小于 <code>target</code> 的最大索引</strong>。</p><p>这个结论不用死记，你要是拿不准，简单举个例子就能得到这个结论了。比如 <code>nums = [2,3,5,7], target = 4</code>，<code>right_bound</code> 函数返回值是 1，因为元素 3 是小于 4 的最大元素。</p><p>与前面的建议相同，考虑到二分搜索代码细节的复杂性，如果非必要，不要自己手写，尽可能用编程语言提供的标准库函数。</p></div><p>如果你想在 <code>target</code> 不存在时返回 -1，很简单，只要在最后判断一下 <code>nums[left-1]</code> 是不是 <code>target</code> 就行了，类似之前的左侧边界搜索，做一点额外的判断即可：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-482-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-482-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-482-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-482-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-482-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-482-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// left - 1 索引越界的话 target 肯定不存在</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断一下 nums[left - 1] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-482-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// left - 1 索引越界的话 target 肯定不存在</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断一下 nums[left - 1] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == target ? (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-482-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt; right:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # ...</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"># 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"># left - 1 索引越界的话 target 肯定不存在</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> or</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums):</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"># 判断一下 nums[left - 1] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-482-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// left - 1 索引越界的话 target 肯定不存在</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 判断一下 nums[left - 1] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">} </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-482-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> func</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">() {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">  while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // left - 1 索引越界的话 target 肯定不存在</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 判断一下 nums[left - 1] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ? (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><strong>4、是否也可以把这个算法的「搜索区间」也统一成两端都闭的形式呢？这样这三个写法就完全统一了，以后就可以闭着眼睛写出来了</strong>。</p><p>答：当然可以，类似搜索左侧边界的统一写法，其实只要改两个地方就行了：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-505-0" aria-selected="true">java 🟢</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-505-1" aria-selected="false">cpp 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-505-2" aria-selected="false">python 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-505-3" aria-selected="false">go 🤖</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-505-4" aria-selected="false">javascript 🤖</button></div><!--[--><div class="vp-code-tab active" id="codetab-505-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java 🟢</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 这里改成收缩左侧边界即可</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 最后改成返回 left - 1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-505-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp 🤖</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">() - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 这里改成收缩左侧边界即可</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 最后改成返回 left - 1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == target ? (left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-505-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python 🤖</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt;= right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 这里改成收缩左侧边界即可</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 最后改成返回 left - 1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> or</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums):</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-505-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go 🤖</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> rightBound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 这里改成收缩左侧边界即可</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 最后改成返回 left - 1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-505-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript 🤖</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 这里改成收缩左侧边界即可</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 最后改成返回 left - 1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ? (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><div data-v-ee1a9bd0><a style="display:none;" href="" data-v-ee1a9bd0> Algorithm visualize </a><details id="div_binary-search-right-bound" class="hint-container details" data-v-ee1a9bd0><summary style="font-size:large;" data-v-ee1a9bd0><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-ee1a9bd0><path fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3" data-v-ee1a9bd0></path><path fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z" data-v-ee1a9bd0></path></svg>   <strong data-v-ee1a9bd0>算法可视化面板</strong><svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left:auto;margin-right:10px;" data-v-ee1a9bd0><path fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z" data-v-ee1a9bd0></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right:10px;" data-v-ee1a9bd0><path fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z" data-v-ee1a9bd0></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-ee1a9bd0><path fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z" data-v-ee1a9bd0></path></svg><span style="display:none;" class="copy-feedback" data-v-ee1a9bd0>Link copied!</span></summary><div class="resizable" style="height:70vh;" data-v-ee1a9bd0><iframe title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-search-right-bound" src="" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow:auto;" data-v-ee1a9bd0></iframe></div></details></div><p>当然，由于 while 的结束条件为 <code>right == left - 1</code>，所以你把上述代码中的 <code>left - 1</code> 都改成 <code>right</code> 也没有问题，这样可能更有利于看出来这是在「搜索右侧边界」：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 这里改成收缩左侧边界即可</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 最后改成返回 right</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (right &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || right &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[right] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> right </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>至此，搜索右侧边界的二分查找的两种写法也完成了，其实将「搜索区间」统一成两端都闭反而更容易记忆，你说是吧？</p><h2 id="四、逻辑统一" tabindex="-1"><a class="header-anchor" href="#四、逻辑统一"><span>四、逻辑统一</span></a></h2><p>有了搜索左右边界的二分搜索，你可以去解决力扣第 34 题「<a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener noreferrer">在排序数组中查找元素的第一个和最后一个位置</a>」。接下来梳理一下这些细节差异的因果逻辑：</p><p><strong>第一个，最基本的二分查找算法</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">因为我们初始化 right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以决定了我们的「搜索区间」是 [left, right]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以决定了 </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">同时也决定了 left = mid+</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> 和 right = mid-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">因为我们只需找到一个 target 的索引即可</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以当 nums[mid] == target 时可以立即返回</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第二个，寻找左侧边界的二分查找</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">因为我们初始化 right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以决定了我们的「搜索区间」是 [left, right)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以决定了 </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">同时也决定了 left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> 和 right = mid</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">因为我们需找到 target 的最左侧索引</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以当 nums[mid] == target 时不要立即返回</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">而要收紧右侧边界以锁定左侧边界</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第三个，寻找右侧边界的二分查找</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">因为我们初始化 right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以决定了我们的「搜索区间」是 [left, right)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以决定了 </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; right)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">同时也决定了 left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> 和 right = mid</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">因为我们需找到 target 的最右侧索引</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以当 nums[mid] == target 时不要立即返回</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">而要收紧左侧边界以锁定右侧边界</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">又因为收紧左侧边界时必须 left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">所以最后无论返回 left 还是 right，必须减一</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于寻找左右边界的二分搜索，比较常见的手法是使用左闭右开的「搜索区间」，<strong>我们还根据逻辑将「搜索区间」全都统一成了两端都闭，便于记忆，只要修改两处即可变化出三种写法</strong>：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-551-0" aria-selected="true">java</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-551-1" aria-selected="false">cpp</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-551-2" aria-selected="false">python</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-551-3" aria-selected="false">go</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-551-4" aria-selected="false">javascript</button></div><!--[--><div class="vp-code-tab active" id="codetab-551-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">java</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binary_search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">; </span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">; </span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定左侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[] nums, </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> target) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">    int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">        int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (nums[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 由于 while 的结束条件是 right == left - 1，且现在在求右边界</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 所以用 right 替代 left - 1 更好记</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (right &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || right &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[right] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">?</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> right </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-551-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">cpp</div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binary_search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">; </span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">; </span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定左侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || left &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[left] == target ? left : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">vector</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, right = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (left &lt;= right) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid = left + (right - left) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &lt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] &gt; target) {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[mid] == target) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定右侧边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 由于 while 的结束条件是 right == left - 1，且现在在求右边界</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 所以用 right 替代 left - 1 更好记</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (right &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || right &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">size</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">()) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[right] == target ? right : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-551-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">python</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binary_search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 设置左右下标</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt;= right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 找到目标值</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> mid</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 没有找到目标值</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 设置左右下标</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt;= right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 存在目标值，缩小右边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 判断是否存在目标值</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> or</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums):</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 判断找到的左边界是否是目标值</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[left] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: List[</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">], </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) -&gt; </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 设置左右下标</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    left, right = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums) - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> left &lt;= right:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        mid = left + (right - left) // </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &lt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] &gt; target:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            right = mid - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        elif</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[mid] == target:</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            # 存在目标值，缩小左边界</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">            left = mid + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 判断是否存在目标值</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> right &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> or</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> right &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(nums):</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    # 判断找到的右边界是否是目标值</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> right </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> nums[right] == target </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-551-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">go</div><!--[--><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binarySearch</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> leftBound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定左侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">func</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> rightBound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> []</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)-</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> := </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定右侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">len</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> right</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-551-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">javascript</div><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> binary_search</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">; </span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">; </span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">            return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 直接返回</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> left_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定左侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断 target 是否存在于 nums 中</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 判断一下 nums[left] 是不是 target</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ? </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> right_bound</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">        var</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">floor</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) / </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &lt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] &gt; </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> - </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">            // 别返回，锁定右侧边界</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">            left</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">mid</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> + </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 由于 while 的结束条件是 right == left - 1，且现在在求右边界</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 所以用 right 替代 left - 1 更好记</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &lt; </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> || </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> &gt;= </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> nums</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] == </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ? </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">right</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> : -</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>如果以上内容你都能理解，那么恭喜你，二分查找算法的细节不过如此。通过本文，你学会了：</p><p>1、分析二分查找代码时，不要出现 else，全部展开成 else if 方便理解。把逻辑写对之后再合并分支，提升运行效率。</p><p>2、注意「搜索区间」和 while 的终止条件，如果存在漏掉的元素，记得在最后检查。</p><p>3、如需定义左闭右开的「搜索区间」搜索左右边界，只要在 <code>nums[mid] == target</code> 时做修改即可，搜索右侧时需要减一。</p><p>4、如果将「搜索区间」全都统一成两端都闭，好记，只要稍改 <code>nums[mid] == target</code> 条件处的代码和返回的逻辑即可，推荐拿小本本记下，作为二分搜索模板。</p><p>最后我想说，以上二分搜索的框架属于「术」的范畴，如果上升到「道」的层面，<strong>二分思维的精髓就是：通过已知信息尽可能多地收缩（折半）搜索空间</strong>，从而增加穷举效率，快速找到目标。</p><p>理解本文能保证你写出正确的二分查找的代码，但实际题目中不会直接让你写二分代码，我会在 <a class="route-link" href="/algo/frequency-interview/binary-search-in-action/">二分查找的运用</a> 和 <a class="route-link" href="/algo/problem-set/binary-search/">二分查找的更多习题</a> 中进一步讲解如何把二分思维运用到更多算法题中。</p><hr><details class="hint-container details"><summary><strong>引用本文的题目</strong></summary><p><strong>安装 <a href="https://labuladong.online/algo/intro/chrome/" target="_blank" rel="noopener noreferrer">我的 Chrome 刷题插件</a> 点开下列题目可直接查看解题思路：</strong></p><table><thead><tr><th style="text-align:center;">LeetCode</th><th style="text-align:center;">力扣</th><th style="text-align:center;">难度</th></tr></thead><tbody><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/ugly-number-iii/?show=1" target="_blank" rel="noopener noreferrer">1201. Ugly Number III</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/ugly-number-iii/?show=1" target="_blank" rel="noopener noreferrer">1201. 丑数 III</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/maximum-profit-in-job-scheduling/?show=1" target="_blank" rel="noopener noreferrer">1235. Maximum Profit in Job Scheduling</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/maximum-profit-in-job-scheduling/?show=1" target="_blank" rel="noopener noreferrer">1235. 规划兼职工作</a></td><td style="text-align:center;">🔴</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/find-peak-element/?show=1" target="_blank" rel="noopener noreferrer">162. Find Peak Element</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/find-peak-element/?show=1" target="_blank" rel="noopener noreferrer">162. 寻找峰值</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/search-a-2d-matrix-ii/?show=1" target="_blank" rel="noopener noreferrer">240. Search a 2D Matrix II</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/search-a-2d-matrix-ii/?show=1" target="_blank" rel="noopener noreferrer">240. 搜索二维矩阵 II</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/search-in-rotated-sorted-array/?show=1" target="_blank" rel="noopener noreferrer">33. Search in Rotated Sorted Array</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/search-in-rotated-sorted-array/?show=1" target="_blank" rel="noopener noreferrer">33. 搜索旋转排序数组</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/search-insert-position/?show=1" target="_blank" rel="noopener noreferrer">35. Search Insert Position</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/search-insert-position/?show=1" target="_blank" rel="noopener noreferrer">35. 搜索插入位置</a></td><td style="text-align:center;">🟢</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/find-k-closest-elements/?show=1" target="_blank" rel="noopener noreferrer">658. Find K Closest Elements</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/find-k-closest-elements/?show=1" target="_blank" rel="noopener noreferrer">658. 找到 K 个最接近的元素</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/search-a-2d-matrix/?show=1" target="_blank" rel="noopener noreferrer">74. Search a 2D Matrix</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/search-a-2d-matrix/?show=1" target="_blank" rel="noopener noreferrer">74. 搜索二维矩阵</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/number-of-matching-subsequences/?show=1" target="_blank" rel="noopener noreferrer">792. Number of Matching Subsequences</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/number-of-matching-subsequences/?show=1" target="_blank" rel="noopener noreferrer">792. 匹配子序列的单词数</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/preimage-size-of-factorial-zeroes-function/?show=1" target="_blank" rel="noopener noreferrer">793. Preimage Size of Factorial Zeroes Function</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/preimage-size-of-factorial-zeroes-function/?show=1" target="_blank" rel="noopener noreferrer">793. 阶乘函数后 K 个零</a></td><td style="text-align:center;">🔴</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/search-in-rotated-sorted-array-ii/?show=1" target="_blank" rel="noopener noreferrer">81. Search in Rotated Sorted Array II</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/search-in-rotated-sorted-array-ii/?show=1" target="_blank" rel="noopener noreferrer">81. 搜索旋转排序数组 II</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;"><a href="https://leetcode.com/problems/peak-index-in-a-mountain-array/?show=1" target="_blank" rel="noopener noreferrer">852. Peak Index in a Mountain Array</a></td><td style="text-align:center;"><a href="https://leetcode.cn/problems/peak-index-in-a-mountain-array/?show=1" target="_blank" rel="noopener noreferrer">852. 山脉数组的峰顶索引</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;"><a href="https://leetcode.cn/problems/er-wei-shu-zu-zhong-de-cha-zhao-lcof/?show=1" target="_blank" rel="noopener noreferrer">剑指 Offer 04. 二维数组中的查找</a></td><td style="text-align:center;">🟠</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;"><a href="https://leetcode.cn/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/?show=1" target="_blank" rel="noopener noreferrer">剑指 Offer 53 - I. 在排序数组中查找数字 I</a></td><td style="text-align:center;">🟢</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;"><a href="https://leetcode.cn/problems/que-shi-de-shu-zi-lcof/?show=1" target="_blank" rel="noopener noreferrer">剑指 Offer 53 - II. 0～n-1中缺失的数字</a></td><td style="text-align:center;">🟢</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;"><a href="https://leetcode.cn/problems/N6YdxV/?show=1" target="_blank" rel="noopener noreferrer">剑指 Offer II 068. 查找插入位置</a></td><td style="text-align:center;">🟢</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;"><a href="https://leetcode.cn/problems/B1IidL/?show=1" target="_blank" rel="noopener noreferrer">剑指 Offer II 069. 山峰数组的顶部</a></td><td style="text-align:center;">🟢</td></tr></tbody></table></details><hr></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">最近更新：</span><time class="vp-meta-info" datetime="2025-07-21T03:29:25.280Z" data-allow-mismatch>2025/7/21 11:29</time></div><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/algo/practice-in-action/rabinkarp/" aria-label="滑动窗口延伸：Rabin Karp 字符匹配算法"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->滑动窗口延伸：Rabin Karp 字符匹配算法</div></a><a class="route-link auto-link next" href="/algo/frequency-interview/binary-search-in-action/" aria-label="实际运用二分搜索时的思维框架"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">实际运用二分搜索时的思维框架<!----></div></a></nav><!----><!--[--><div style="justify-content:center;display:flex;" data-v-95bd7423><div class="artalkCommentsContainer" data-v-95bd7423><div id="artalkComments" style="display:none;" data-v-95bd7423></div><div style="margin-bottom:10px;" data-v-95bd7423><!----></div></div></div><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright"><p>版权所有，侵权必究 © 2019 - 2025 labuladong</p><p><img src="/algo/beian.png" style="width: 16px" alt=""><a href="https://beian.mps.gov.cn/#/query/webSearch?code=51010602002050" rel="noreferrer" target="_blank">川公网安备51010602002050</a>&nbsp;&nbsp;<a target='_blank' href='https://beian.miit.gov.cn/#/Integrated/index'>蜀ICP备2023008303号</a></p></div></footer></div><!--]--><!--[--><!----><!----><!--[--><!--]--><!----><!--[--><div style="display:none;" class="login-window-wrapper fullscreen"><header class="vp-notice-title"><svg xmlns="http://www.w3.org/2000/svg" class="icon close-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="close icon"><path d="m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"></path></svg><span>微信扫码授权用户信息</span></header><div class="vp-notice-content" id="wx_login_container"></div><div class="vp-notice-footer"></div></div><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/algo/assets/app-DoHzhCkd.js" defer></script>
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"6f08fc385f864c1ba2f3a406756e83c1","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
