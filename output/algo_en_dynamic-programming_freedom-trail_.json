{
    "url": "https://labuladong.online/algo/en/dynamic-programming/freedom-trail/",
    "title": "Play Freedom Trail with DP | Labuladong Algo Notes",
    "content": "<nav class=\"vp-breadcrumb disable\"></nav> <div class=\"vp-page-title\"><h1><!---->Play Freedom Trail with DP</h1><div class=\"page-info\"><span class=\"page-author-info\" aria-label=\"AuthorðŸ–Š\" data-balloon-pos=\"up\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon author-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"author icon\" name=\"author\"><path d=\"M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z\"></path></svg><span><a class=\"page-author-item\" href=\"https://github.com/labuladong\" target=\"_blank\" rel=\"noopener noreferrer\">labuladong</a></span><span property=\"author\" content=\"labuladong\"></span></span><span class=\"page-original-info\">Original</span><span class=\"page-word-info\" aria-label=\"WordsðŸ” \" data-balloon-pos=\"up\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon word-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"word icon\" name=\"word\"><path d=\"M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z\"></path><path d=\"M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z\"></path></svg><span>About 3200 words</span><meta property=\"wordCount\" content=\"3200\"></span></div><hr></div> <h1><!---->Play Freedom Trail with DP</h1> <div class=\"page-info\"><span class=\"page-author-info\" aria-label=\"AuthorðŸ–Š\" data-balloon-pos=\"up\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon author-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"author icon\" name=\"author\"><path d=\"M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z\"></path></svg><span><a class=\"page-author-item\" href=\"https://github.com/labuladong\" target=\"_blank\" rel=\"noopener noreferrer\">labuladong</a></span><span property=\"author\" content=\"labuladong\"></span></span><span class=\"page-original-info\">Original</span><span class=\"page-word-info\" aria-label=\"WordsðŸ” \" data-balloon-pos=\"up\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon word-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"word icon\" name=\"word\"><path d=\"M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z\"></path><path d=\"M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z\"></path></svg><span>About 3200 words</span><meta property=\"wordCount\" content=\"3200\"></span></div> <span class=\"page-author-info\" aria-label=\"AuthorðŸ–Š\" data-balloon-pos=\"up\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon author-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"author icon\" name=\"author\"><path d=\"M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z\"></path></svg><span><a class=\"page-author-item\" href=\"https://github.com/labuladong\" target=\"_blank\" rel=\"noopener noreferrer\">labuladong</a></span><span property=\"author\" content=\"labuladong\"></span></span> <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon author-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"author icon\" name=\"author\"><path d=\"M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z\"></path></svg> <path d=\"M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z\"></path> <span><a class=\"page-author-item\" href=\"https://github.com/labuladong\" target=\"_blank\" rel=\"noopener noreferrer\">labuladong</a></span> <a class=\"page-author-item\" href=\"https://github.com/labuladong\" target=\"_blank\" rel=\"noopener noreferrer\">labuladong</a> <span property=\"author\" content=\"labuladong\"></span> <span class=\"page-original-info\">Original</span> <span class=\"page-word-info\" aria-label=\"WordsðŸ” \" data-balloon-pos=\"up\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon word-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"word icon\" name=\"word\"><path d=\"M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z\"></path><path d=\"M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z\"></path></svg><span>About 3200 words</span><meta property=\"wordCount\" content=\"3200\"></span> <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon word-icon\" viewbox=\"0 0 1024 1024\" fill=\"currentColor\" aria-label=\"word icon\" name=\"word\"><path d=\"M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z\"></path><path d=\"M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z\"></path></svg> <path d=\"M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z\"></path> <path d=\"M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z\"></path> <span>About 3200 words</span> <meta property=\"wordCount\" content=\"3200\"> <hr> <div class=\"\" vp-content><!----><div id=\"markdown-content\"><div style=\"display:none;\"><h2 id=\"\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#\"><span></span></a></h2></div><div style=\"display:none;\"><h3 tabindex=\"-1\"> 514. Freedom Trail https://leetcode.com/problems/freedom-trail </h3></div><div class=\"hint-container note\"><p class=\"hint-container-title\">This article will resolve</p><table><thead><tr><th style=\"text-align:center;\">LeetCode</th><th style=\"text-align:center;\">Difficulty</th></tr></thead><tbody><tr><td style=\"text-align:center;\"><a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a></td><td style=\"text-align:center;\">ðŸ”´</td></tr></tbody></table></div><div class=\"hint-container info\"><p class=\"hint-container-title\">Prerequisite Knowledge</p><p>Before reading this article, you should first learn:</p><ul><li><a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Core Framework of Dynamic Programming</a></li></ul></div><p>The cover image of this article is from a mission storyline in a game called \"Fallout 4\":</p><div class=\"img-content\"><img src=\"/algo/images/ring/1.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>This rotating disk resembles a combination lock. Notice the red pointer slightly above the center. By rotating the disk, you can align the pointer with different letters and then press the central button to input the selected letter.</p><p>To trigger the mechanism and open the adjacent door, you need to rotate the disk so the pointer successively points to R, A, I, L, R, O, A, D, pressing the button each time.</p><p>The reason these specific letters form the password is hinted at in the game's storyline, which we won't delve into here.</p><p>So, what does this game scenario have to do with dynamic programming?</p><p><strong>Let's think about it a bit: inputting these letters by rotating the disk can be cumbersome. In what sequence should you rotate the disk to minimize the number of moves required?</strong></p><p>The number of moves required will vary depending on the method used to rotate the disk.</p><p>For instance, to align a letter with the pointer, you can rotate the disk clockwise or counterclockwise. Some letters may appear more than once, such as the uppercase letter O in the image, which appears three times at different positions on the disk. Which O should you align with to minimize the total number of moves?</p><p>As we've mentioned several times before, problems that ask for the optimal solution are typically solved using dynamic programming, as it is a type of optimization algorithm.</p><p>There's a problem on LeetCode based on this disk game, and it's rated Hard. However, I solved it quickly because I had previously considered a very interesting real-life example that can be compared to this problem. Let's briefly introduce it below.</p><p>I once practiced several piano pieces by Liszt and Chopin. Readers who haven't played the piano might not know that practicing piano scores requires determining the \"fingerings\" in advance.</p><p>The notes on the staff go up and down, and the fingers of both hands must coordinate with each other. This means you must decide which finger of which hand to use for each note and write it on the score.</p><p>For example, a piece I really like is called \"Liebestraum,\" and here is the score from when I was a beginner:</p><div class=\"img-content\"><img src=\"/algo/images/ring/2.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>The number 1 on the notes represents the thumb, 2 represents the index finger, and so on. By practicing according to the determined fingerings, you develop muscle memory and eventually master a piece.</p><p>Fingerings vary from person to person. For instance, those with larger hands might be able to cross their middle finger over their thumb, while those with smaller hands might find this awkward. Thus, the fingerings for the same piece might differ.</p><p><strong>So the question arises: How should I design the fingerings to minimize the \"awkwardness\" of finger transitions, thereby maximizing the smoothness of the performance?</strong></p><p>Here, I employed dynamic programming techniques: aren't finger transitions just state transitions? Referring to the earlier article <a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Detailed Explanation of Dynamic Programming</a>, we can solve this problem by clearly defining \"states\" and \"choices.\"</p><p><strong>What is a state? A state is \"the next note to be played\" and \"the current state of the hand.\"</strong></p><p>The next note to be played is simply one of the 88 keys on the piano. The state of the hand is also straightforward: with five fingers, each finger is either pressing a key or not. This results in 32 possible situations, represented by 5 binary digits.</p><p><strong>What is a choice? A choice is \"which finger should play the next note,\"</strong> which involves simply considering all five fingers.</p><p>Of course, considering the current state of the hand, each choice comes with a corresponding cost. As mentioned earlier, this cost varies from person to person, so I need to design a custom loss function for myself to calculate the \"awkwardness level\" of different finger transitions.</p><p>The problem now becomes a standard dynamic programming problem: make the choices that result in the minimum \"awkwardness level\" according to the loss function to ensure the smoothest performance...</p><p>However, the time complexity of this algorithm is too high. We only analyzed a single note earlier, but if we string them into a piece, the time and space complexity must be multiplied by the number of notes in the piece, which is significant.</p><p>Moreover, this loss function is difficult to quantify. Hitting the black and white keys on a piano varies in difficulty, and the \"awkwardness level\" is based on feeling, which is somewhat imprecise...</p><p>However, there is no need to calculate the fingering for the entire piece; only certain complex passages need to be considered. This algorithm is still relatively effective.</p><p>Having digressed so much, it is finally time to get to the main topic. Today, we will discuss LeetCode Problem 514, \"<a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">Freedom Trail</a>,\" which has a similar concept to the piano fingering problem. If you understand the piano example, you should be able to solve this algorithm problem quickly.</p><p>The problem provides you with an input string <code>ring</code> representing the characters on a dial (the pointer is at the 12 o'clock position, initially pointing to <code>ring[0]</code>), and another input string <code>key</code> representing the string you need to type by rotating the dial. Your algorithm needs to return the minimum number of operations required to input this <code>key</code> (rotating one notch of the dial and pressing the button in the center of the dial both count as one operation).</p><p>The function signature is as follows:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-130-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-130-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><p>For example, given the input <code>ring = \"godding\", key = \"gd\"</code>, the corresponding disk is shown below (uppercase is for clarity, the actual input strings are lowercase letters):</p><div class=\"img-content\"><img src=\"/algo/images/ring/3.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>We need to input <code>key = \"gd\"</code>, and the algorithm returns 4.</p><p>Since the pointer is currently on the letter <code>\"g\"</code>, you can press the middle button directly, then rotate the disk two steps counterclockwise so that the pointer points to the letter <code>\"d\"</code>, and press the middle button again.</p><p>In this process, the button is pressed twice, and the disk is rotated two steps, totaling 4 operations, which is the minimum number of operations, so the algorithm should return 4.</p><p>We can first make an equivalence in the problem: is rotating the disk equivalent to moving the pointer?</p><p><strong>The original problem can be transformed into: the disk is fixed, and we can move the pointer; now we need to move the pointer and press the button to input the string corresponding to <code>key</code> with the fewest operations.</strong></p><p>So, how can we solve this problem using dynamic programming techniques? Or rather, what are the \"states\" and \"choices\" in this problem?</p><p><strong>The \"state\" is \"the current character to be input\" and \"the current position of the disk pointer.\"</strong></p><p>More specifically, the \"state\" is represented by two variables <code>i</code> and <code>j</code>. We can use <code>i</code> to represent the character that the pointer on the current disk is pointing to (i.e., <code>ring[i]</code>); <code>j</code> represents the character to be input (i.e., <code>key[j]</code>).</p><p>Thus, we can write a <code>dp</code> function:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-178-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-178-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><p>The <code>dp</code> function is defined as follows:</p><p><strong>When the disk pointer points to <code>ring[i]</code>, at least <code>dp(ring, i, key, j)</code> operations are needed to input the string <code>key[j..]</code>.</strong></p><p>According to this definition, the problem is essentially asking to calculate the value of <code>dp(ring, 0, key, 0)</code>, and we can write the base case of the <code>dp</code> function:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-204-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-204-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><p>Next, consider how to make choices based on the state and how to transition between states.</p><p><strong>\"Choice\" refers to \"how to move the pointer to obtain the desired input character.\"</strong></p><p>Specifically, for the character <code>key[j]</code> that you want to input, how can the dial be moved to get this character?</p><p>For example, if the input is <code>ring = \"gdonidg\"</code>, the state of the dial is shown below:</p><div class=\"img-content\"><img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>Assume the character you want to input is <code>key[j] = \"d\"</code>. There are two letters <code>\"d\"</code> on the dial, and you can move the pointer clockwise or counterclockwise. Therefore, there are four \"choices\" to input the character <code>\"d\"</code>, and we need to choose the method with the least number of operations.</p><p>The general code logic is as follows:</p><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished input</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make a choice</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">    int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [all indices of character key[j] in ring]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i clockwise to k,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i counterclockwise to k</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>As for whether to move clockwise or counterclockwise, it's straightforward to decide; just choose the closer direction. However, for the two characters <code>\"d\"</code> on the dial, can you still choose the closer one?</p><p>No, because it depends on the character that needs to be input after <code>key[i]</code>. Consider the previous example:</p><div class=\"img-content\"><img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>If the input is <code>key = \"di\"</code>, even if the right <code>\"d\"</code> is closer, you should choose the left <code>\"d\"</code> because the <code>\"i\"</code> is right next to the left <code>\"d\"</code>, resulting in fewer overall operations.</p><p>So, how should it be determined? Essentially, it's brute-force search. Recursively call the <code>dp</code> function to calculate the \"overall\" cost of both choices, then compare them.</p><p>That's about it. Let's look at the final code:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-257-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-257-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><div data-v-ee1a9bd0><a style=\"display:none;\" href=\"\" data-v-ee1a9bd0> Algorithm visualize </a><details id=\"div_freedom-trail\" class=\"hint-container details\" data-v-ee1a9bd0><summary style=\"font-size:large;\" data-v-ee1a9bd0><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z\" opacity=\"0.3\" data-v-ee1a9bd0></path><path fill=\"currentColor\" d=\"m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z\" data-v-ee1a9bd0></path></svg> Â  <strong data-v-ee1a9bd0>Algorithm Visualization</strong><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.9em\" height=\"0.9em\" viewbox=\"0 0 24 24\" style=\"margin-left:auto;margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" style=\"margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z\" data-v-ee1a9bd0></path></svg><span style=\"display:none;\" class=\"copy-feedback\" data-v-ee1a9bd0>Link copied!</span></summary><div class=\"resizable\" style=\"height:70vh;\" data-v-ee1a9bd0><iframe title=\"algo-visualize panel\" allow=\"clipboard-write; fullscreen;\" id=\"iframe_freedom-trail\" src=\"\" width=\"100%\" height=\"100%\" loading=\"lazy\" scrolling=\"auto\" frameborder=\"0\" style=\"overflow:auto;\" data-v-ee1a9bd0></iframe></div></details></div></div><!----><!----><!----></div> <div id=\"markdown-content\"><div style=\"display:none;\"><h2 id=\"\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#\"><span></span></a></h2></div><div style=\"display:none;\"><h3 tabindex=\"-1\"> 514. Freedom Trail https://leetcode.com/problems/freedom-trail </h3></div><div class=\"hint-container note\"><p class=\"hint-container-title\">This article will resolve</p><table><thead><tr><th style=\"text-align:center;\">LeetCode</th><th style=\"text-align:center;\">Difficulty</th></tr></thead><tbody><tr><td style=\"text-align:center;\"><a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a></td><td style=\"text-align:center;\">ðŸ”´</td></tr></tbody></table></div><div class=\"hint-container info\"><p class=\"hint-container-title\">Prerequisite Knowledge</p><p>Before reading this article, you should first learn:</p><ul><li><a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Core Framework of Dynamic Programming</a></li></ul></div><p>The cover image of this article is from a mission storyline in a game called \"Fallout 4\":</p><div class=\"img-content\"><img src=\"/algo/images/ring/1.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>This rotating disk resembles a combination lock. Notice the red pointer slightly above the center. By rotating the disk, you can align the pointer with different letters and then press the central button to input the selected letter.</p><p>To trigger the mechanism and open the adjacent door, you need to rotate the disk so the pointer successively points to R, A, I, L, R, O, A, D, pressing the button each time.</p><p>The reason these specific letters form the password is hinted at in the game's storyline, which we won't delve into here.</p><p>So, what does this game scenario have to do with dynamic programming?</p><p><strong>Let's think about it a bit: inputting these letters by rotating the disk can be cumbersome. In what sequence should you rotate the disk to minimize the number of moves required?</strong></p><p>The number of moves required will vary depending on the method used to rotate the disk.</p><p>For instance, to align a letter with the pointer, you can rotate the disk clockwise or counterclockwise. Some letters may appear more than once, such as the uppercase letter O in the image, which appears three times at different positions on the disk. Which O should you align with to minimize the total number of moves?</p><p>As we've mentioned several times before, problems that ask for the optimal solution are typically solved using dynamic programming, as it is a type of optimization algorithm.</p><p>There's a problem on LeetCode based on this disk game, and it's rated Hard. However, I solved it quickly because I had previously considered a very interesting real-life example that can be compared to this problem. Let's briefly introduce it below.</p><p>I once practiced several piano pieces by Liszt and Chopin. Readers who haven't played the piano might not know that practicing piano scores requires determining the \"fingerings\" in advance.</p><p>The notes on the staff go up and down, and the fingers of both hands must coordinate with each other. This means you must decide which finger of which hand to use for each note and write it on the score.</p><p>For example, a piece I really like is called \"Liebestraum,\" and here is the score from when I was a beginner:</p><div class=\"img-content\"><img src=\"/algo/images/ring/2.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>The number 1 on the notes represents the thumb, 2 represents the index finger, and so on. By practicing according to the determined fingerings, you develop muscle memory and eventually master a piece.</p><p>Fingerings vary from person to person. For instance, those with larger hands might be able to cross their middle finger over their thumb, while those with smaller hands might find this awkward. Thus, the fingerings for the same piece might differ.</p><p><strong>So the question arises: How should I design the fingerings to minimize the \"awkwardness\" of finger transitions, thereby maximizing the smoothness of the performance?</strong></p><p>Here, I employed dynamic programming techniques: aren't finger transitions just state transitions? Referring to the earlier article <a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Detailed Explanation of Dynamic Programming</a>, we can solve this problem by clearly defining \"states\" and \"choices.\"</p><p><strong>What is a state? A state is \"the next note to be played\" and \"the current state of the hand.\"</strong></p><p>The next note to be played is simply one of the 88 keys on the piano. The state of the hand is also straightforward: with five fingers, each finger is either pressing a key or not. This results in 32 possible situations, represented by 5 binary digits.</p><p><strong>What is a choice? A choice is \"which finger should play the next note,\"</strong> which involves simply considering all five fingers.</p><p>Of course, considering the current state of the hand, each choice comes with a corresponding cost. As mentioned earlier, this cost varies from person to person, so I need to design a custom loss function for myself to calculate the \"awkwardness level\" of different finger transitions.</p><p>The problem now becomes a standard dynamic programming problem: make the choices that result in the minimum \"awkwardness level\" according to the loss function to ensure the smoothest performance...</p><p>However, the time complexity of this algorithm is too high. We only analyzed a single note earlier, but if we string them into a piece, the time and space complexity must be multiplied by the number of notes in the piece, which is significant.</p><p>Moreover, this loss function is difficult to quantify. Hitting the black and white keys on a piano varies in difficulty, and the \"awkwardness level\" is based on feeling, which is somewhat imprecise...</p><p>However, there is no need to calculate the fingering for the entire piece; only certain complex passages need to be considered. This algorithm is still relatively effective.</p><p>Having digressed so much, it is finally time to get to the main topic. Today, we will discuss LeetCode Problem 514, \"<a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">Freedom Trail</a>,\" which has a similar concept to the piano fingering problem. If you understand the piano example, you should be able to solve this algorithm problem quickly.</p><p>The problem provides you with an input string <code>ring</code> representing the characters on a dial (the pointer is at the 12 o'clock position, initially pointing to <code>ring[0]</code>), and another input string <code>key</code> representing the string you need to type by rotating the dial. Your algorithm needs to return the minimum number of operations required to input this <code>key</code> (rotating one notch of the dial and pressing the button in the center of the dial both count as one operation).</p><p>The function signature is as follows:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-130-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-130-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><p>For example, given the input <code>ring = \"godding\", key = \"gd\"</code>, the corresponding disk is shown below (uppercase is for clarity, the actual input strings are lowercase letters):</p><div class=\"img-content\"><img src=\"/algo/images/ring/3.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>We need to input <code>key = \"gd\"</code>, and the algorithm returns 4.</p><p>Since the pointer is currently on the letter <code>\"g\"</code>, you can press the middle button directly, then rotate the disk two steps counterclockwise so that the pointer points to the letter <code>\"d\"</code>, and press the middle button again.</p><p>In this process, the button is pressed twice, and the disk is rotated two steps, totaling 4 operations, which is the minimum number of operations, so the algorithm should return 4.</p><p>We can first make an equivalence in the problem: is rotating the disk equivalent to moving the pointer?</p><p><strong>The original problem can be transformed into: the disk is fixed, and we can move the pointer; now we need to move the pointer and press the button to input the string corresponding to <code>key</code> with the fewest operations.</strong></p><p>So, how can we solve this problem using dynamic programming techniques? Or rather, what are the \"states\" and \"choices\" in this problem?</p><p><strong>The \"state\" is \"the current character to be input\" and \"the current position of the disk pointer.\"</strong></p><p>More specifically, the \"state\" is represented by two variables <code>i</code> and <code>j</code>. We can use <code>i</code> to represent the character that the pointer on the current disk is pointing to (i.e., <code>ring[i]</code>); <code>j</code> represents the character to be input (i.e., <code>key[j]</code>).</p><p>Thus, we can write a <code>dp</code> function:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-178-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-178-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><p>The <code>dp</code> function is defined as follows:</p><p><strong>When the disk pointer points to <code>ring[i]</code>, at least <code>dp(ring, i, key, j)</code> operations are needed to input the string <code>key[j..]</code>.</strong></p><p>According to this definition, the problem is essentially asking to calculate the value of <code>dp(ring, 0, key, 0)</code>, and we can write the base case of the <code>dp</code> function:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-204-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-204-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><p>Next, consider how to make choices based on the state and how to transition between states.</p><p><strong>\"Choice\" refers to \"how to move the pointer to obtain the desired input character.\"</strong></p><p>Specifically, for the character <code>key[j]</code> that you want to input, how can the dial be moved to get this character?</p><p>For example, if the input is <code>ring = \"gdonidg\"</code>, the state of the dial is shown below:</p><div class=\"img-content\"><img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>Assume the character you want to input is <code>key[j] = \"d\"</code>. There are two letters <code>\"d\"</code> on the dial, and you can move the pointer clockwise or counterclockwise. Therefore, there are four \"choices\" to input the character <code>\"d\"</code>, and we need to choose the method with the least number of operations.</p><p>The general code logic is as follows:</p><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished input</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make a choice</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">    int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [all indices of character key[j] in ring]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i clockwise to k,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i counterclockwise to k</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>As for whether to move clockwise or counterclockwise, it's straightforward to decide; just choose the closer direction. However, for the two characters <code>\"d\"</code> on the dial, can you still choose the closer one?</p><p>No, because it depends on the character that needs to be input after <code>key[i]</code>. Consider the previous example:</p><div class=\"img-content\"><img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div><p>If the input is <code>key = \"di\"</code>, even if the right <code>\"d\"</code> is closer, you should choose the left <code>\"d\"</code> because the <code>\"i\"</code> is right next to the left <code>\"d\"</code>, resulting in fewer overall operations.</p><p>So, how should it be determined? Essentially, it's brute-force search. Recursively call the <code>dp</code> function to calculate the \"overall\" cost of both choices, then compare them.</p><p>That's about it. Let's look at the final code:</p><div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-257-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-257-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div><div data-v-ee1a9bd0><a style=\"display:none;\" href=\"\" data-v-ee1a9bd0> Algorithm visualize </a><details id=\"div_freedom-trail\" class=\"hint-container details\" data-v-ee1a9bd0><summary style=\"font-size:large;\" data-v-ee1a9bd0><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z\" opacity=\"0.3\" data-v-ee1a9bd0></path><path fill=\"currentColor\" d=\"m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z\" data-v-ee1a9bd0></path></svg> Â  <strong data-v-ee1a9bd0>Algorithm Visualization</strong><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.9em\" height=\"0.9em\" viewbox=\"0 0 24 24\" style=\"margin-left:auto;margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" style=\"margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z\" data-v-ee1a9bd0></path></svg><span style=\"display:none;\" class=\"copy-feedback\" data-v-ee1a9bd0>Link copied!</span></summary><div class=\"resizable\" style=\"height:70vh;\" data-v-ee1a9bd0><iframe title=\"algo-visualize panel\" allow=\"clipboard-write; fullscreen;\" id=\"iframe_freedom-trail\" src=\"\" width=\"100%\" height=\"100%\" loading=\"lazy\" scrolling=\"auto\" frameborder=\"0\" style=\"overflow:auto;\" data-v-ee1a9bd0></iframe></div></details></div></div> <div style=\"display:none;\"><h2 id=\"\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#\"><span></span></a></h2></div> <h2 id=\"\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#\"><span></span></a></h2> <a class=\"header-anchor\" href=\"#\"><span></span></a> <span></span> <div style=\"display:none;\"><h3 tabindex=\"-1\"> 514. Freedom Trail https://leetcode.com/problems/freedom-trail </h3></div> <h3 tabindex=\"-1\"> 514. Freedom Trail https://leetcode.com/problems/freedom-trail </h3> <div class=\"hint-container note\"><p class=\"hint-container-title\">This article will resolve</p><table><thead><tr><th style=\"text-align:center;\">LeetCode</th><th style=\"text-align:center;\">Difficulty</th></tr></thead><tbody><tr><td style=\"text-align:center;\"><a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a></td><td style=\"text-align:center;\">ðŸ”´</td></tr></tbody></table></div> <p class=\"hint-container-title\">This article will resolve</p> <table><thead><tr><th style=\"text-align:center;\">LeetCode</th><th style=\"text-align:center;\">Difficulty</th></tr></thead><tbody><tr><td style=\"text-align:center;\"><a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a></td><td style=\"text-align:center;\">ðŸ”´</td></tr></tbody></table> <thead><tr><th style=\"text-align:center;\">LeetCode</th><th style=\"text-align:center;\">Difficulty</th></tr></thead> <tr><th style=\"text-align:center;\">LeetCode</th><th style=\"text-align:center;\">Difficulty</th></tr> <th style=\"text-align:center;\">LeetCode</th> <th style=\"text-align:center;\">Difficulty</th> <tbody><tr><td style=\"text-align:center;\"><a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a></td><td style=\"text-align:center;\">ðŸ”´</td></tr></tbody> <tr><td style=\"text-align:center;\"><a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a></td><td style=\"text-align:center;\">ðŸ”´</td></tr> <td style=\"text-align:center;\"><a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a></td> <a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">514. Freedom Trail</a> <td style=\"text-align:center;\">ðŸ”´</td> <div class=\"hint-container info\"><p class=\"hint-container-title\">Prerequisite Knowledge</p><p>Before reading this article, you should first learn:</p><ul><li><a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Core Framework of Dynamic Programming</a></li></ul></div> <p class=\"hint-container-title\">Prerequisite Knowledge</p> <p>Before reading this article, you should first learn:</p> <ul><li><a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Core Framework of Dynamic Programming</a></li></ul> <li><a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Core Framework of Dynamic Programming</a></li> <a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Core Framework of Dynamic Programming</a> <p>The cover image of this article is from a mission storyline in a game called \"Fallout 4\":</p> <div class=\"img-content\"><img src=\"/algo/images/ring/1.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div> <img src=\"/algo/images/ring/1.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"> <p>This rotating disk resembles a combination lock. Notice the red pointer slightly above the center. By rotating the disk, you can align the pointer with different letters and then press the central button to input the selected letter.</p> <p>To trigger the mechanism and open the adjacent door, you need to rotate the disk so the pointer successively points to R, A, I, L, R, O, A, D, pressing the button each time.</p> <p>The reason these specific letters form the password is hinted at in the game's storyline, which we won't delve into here.</p> <p>So, what does this game scenario have to do with dynamic programming?</p> <p><strong>Let's think about it a bit: inputting these letters by rotating the disk can be cumbersome. In what sequence should you rotate the disk to minimize the number of moves required?</strong></p> <strong>Let's think about it a bit: inputting these letters by rotating the disk can be cumbersome. In what sequence should you rotate the disk to minimize the number of moves required?</strong> <p>The number of moves required will vary depending on the method used to rotate the disk.</p> <p>For instance, to align a letter with the pointer, you can rotate the disk clockwise or counterclockwise. Some letters may appear more than once, such as the uppercase letter O in the image, which appears three times at different positions on the disk. Which O should you align with to minimize the total number of moves?</p> <p>As we've mentioned several times before, problems that ask for the optimal solution are typically solved using dynamic programming, as it is a type of optimization algorithm.</p> <p>There's a problem on LeetCode based on this disk game, and it's rated Hard. However, I solved it quickly because I had previously considered a very interesting real-life example that can be compared to this problem. Let's briefly introduce it below.</p> <p>I once practiced several piano pieces by Liszt and Chopin. Readers who haven't played the piano might not know that practicing piano scores requires determining the \"fingerings\" in advance.</p> <p>The notes on the staff go up and down, and the fingers of both hands must coordinate with each other. This means you must decide which finger of which hand to use for each note and write it on the score.</p> <p>For example, a piece I really like is called \"Liebestraum,\" and here is the score from when I was a beginner:</p> <div class=\"img-content\"><img src=\"/algo/images/ring/2.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div> <img src=\"/algo/images/ring/2.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"> <p>The number 1 on the notes represents the thumb, 2 represents the index finger, and so on. By practicing according to the determined fingerings, you develop muscle memory and eventually master a piece.</p> <p>Fingerings vary from person to person. For instance, those with larger hands might be able to cross their middle finger over their thumb, while those with smaller hands might find this awkward. Thus, the fingerings for the same piece might differ.</p> <p><strong>So the question arises: How should I design the fingerings to minimize the \"awkwardness\" of finger transitions, thereby maximizing the smoothness of the performance?</strong></p> <strong>So the question arises: How should I design the fingerings to minimize the \"awkwardness\" of finger transitions, thereby maximizing the smoothness of the performance?</strong> <p>Here, I employed dynamic programming techniques: aren't finger transitions just state transitions? Referring to the earlier article <a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Detailed Explanation of Dynamic Programming</a>, we can solve this problem by clearly defining \"states\" and \"choices.\"</p> <a class=\"route-link\" href=\"/algo/en/essential-technique/dynamic-programming-framework/\">Detailed Explanation of Dynamic Programming</a> <p><strong>What is a state? A state is \"the next note to be played\" and \"the current state of the hand.\"</strong></p> <strong>What is a state? A state is \"the next note to be played\" and \"the current state of the hand.\"</strong> <p>The next note to be played is simply one of the 88 keys on the piano. The state of the hand is also straightforward: with five fingers, each finger is either pressing a key or not. This results in 32 possible situations, represented by 5 binary digits.</p> <p><strong>What is a choice? A choice is \"which finger should play the next note,\"</strong> which involves simply considering all five fingers.</p> <strong>What is a choice? A choice is \"which finger should play the next note,\"</strong> <p>Of course, considering the current state of the hand, each choice comes with a corresponding cost. As mentioned earlier, this cost varies from person to person, so I need to design a custom loss function for myself to calculate the \"awkwardness level\" of different finger transitions.</p> <p>The problem now becomes a standard dynamic programming problem: make the choices that result in the minimum \"awkwardness level\" according to the loss function to ensure the smoothest performance...</p> <p>However, the time complexity of this algorithm is too high. We only analyzed a single note earlier, but if we string them into a piece, the time and space complexity must be multiplied by the number of notes in the piece, which is significant.</p> <p>Moreover, this loss function is difficult to quantify. Hitting the black and white keys on a piano varies in difficulty, and the \"awkwardness level\" is based on feeling, which is somewhat imprecise...</p> <p>However, there is no need to calculate the fingering for the entire piece; only certain complex passages need to be considered. This algorithm is still relatively effective.</p> <p>Having digressed so much, it is finally time to get to the main topic. Today, we will discuss LeetCode Problem 514, \"<a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">Freedom Trail</a>,\" which has a similar concept to the piano fingering problem. If you understand the piano example, you should be able to solve this algorithm problem quickly.</p> <a href=\"https://leetcode.com/problems/freedom-trail/\" target=\"_blank\" rel=\"noopener noreferrer\">Freedom Trail</a> <p>The problem provides you with an input string <code>ring</code> representing the characters on a dial (the pointer is at the 12 o'clock position, initially pointing to <code>ring[0]</code>), and another input string <code>key</code> representing the string you need to type by rotating the dial. Your algorithm needs to return the minimum number of operations required to input this <code>key</code> (rotating one notch of the dial and pressing the button in the center of the dial both count as one operation).</p> <code>ring</code> <code>ring[0]</code> <code>key</code> <code>key</code> <p>The function signature is as follows:</p> <div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-130-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-130-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-130-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div> <div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-130-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-4\" aria-selected=\"false\">javascript</button></div> <button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-130-0\" aria-selected=\"true\">java</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-1\" aria-selected=\"false\">cpp</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-2\" aria-selected=\"false\">python</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-3\" aria-selected=\"false\">go</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-130-4\" aria-selected=\"false\">javascript</button> <div class=\"vp-code-tab active\" id=\"codetab-130-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">java</div> <div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key);</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-130-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">cpp</div> <div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-130-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">python</div> <div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-130-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">go</div> <div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-130-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">javascript</div> <div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <p>For example, given the input <code>ring = \"godding\", key = \"gd\"</code>, the corresponding disk is shown below (uppercase is for clarity, the actual input strings are lowercase letters):</p> <code>ring = \"godding\", key = \"gd\"</code> <div class=\"img-content\"><img src=\"/algo/images/ring/3.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div> <img src=\"/algo/images/ring/3.jpg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"> <p>We need to input <code>key = \"gd\"</code>, and the algorithm returns 4.</p> <code>key = \"gd\"</code> <p>Since the pointer is currently on the letter <code>\"g\"</code>, you can press the middle button directly, then rotate the disk two steps counterclockwise so that the pointer points to the letter <code>\"d\"</code>, and press the middle button again.</p> <code>\"g\"</code> <code>\"d\"</code> <p>In this process, the button is pressed twice, and the disk is rotated two steps, totaling 4 operations, which is the minimum number of operations, so the algorithm should return 4.</p> <p>We can first make an equivalence in the problem: is rotating the disk equivalent to moving the pointer?</p> <p><strong>The original problem can be transformed into: the disk is fixed, and we can move the pointer; now we need to move the pointer and press the button to input the string corresponding to <code>key</code> with the fewest operations.</strong></p> <strong>The original problem can be transformed into: the disk is fixed, and we can move the pointer; now we need to move the pointer and press the button to input the string corresponding to <code>key</code> with the fewest operations.</strong> <code>key</code> <p>So, how can we solve this problem using dynamic programming techniques? Or rather, what are the \"states\" and \"choices\" in this problem?</p> <p><strong>The \"state\" is \"the current character to be input\" and \"the current position of the disk pointer.\"</strong></p> <strong>The \"state\" is \"the current character to be input\" and \"the current position of the disk pointer.\"</strong> <p>More specifically, the \"state\" is represented by two variables <code>i</code> and <code>j</code>. We can use <code>i</code> to represent the character that the pointer on the current disk is pointing to (i.e., <code>ring[i]</code>); <code>j</code> represents the character to be input (i.e., <code>key[j]</code>).</p> <code>i</code> <code>j</code> <code>i</code> <code>ring[i]</code> <code>j</code> <code>key[j]</code> <p>Thus, we can write a <code>dp</code> function:</p> <code>dp</code> <div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-178-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-178-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-178-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div> <div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-178-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-4\" aria-selected=\"false\">javascript</button></div> <button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-178-0\" aria-selected=\"true\">java</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-1\" aria-selected=\"false\">cpp</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-2\" aria-selected=\"false\">python</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-3\" aria-selected=\"false\">go</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-178-4\" aria-selected=\"false\">javascript</button> <div class=\"vp-code-tab active\" id=\"codetab-178-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">java</div> <div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j);</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-178-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">cpp</div> <div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-178-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">python</div> <div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-178-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">go</div> <div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-178-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">javascript</div> <div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">){}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <p>The <code>dp</code> function is defined as follows:</p> <code>dp</code> <p><strong>When the disk pointer points to <code>ring[i]</code>, at least <code>dp(ring, i, key, j)</code> operations are needed to input the string <code>key[j..]</code>.</strong></p> <strong>When the disk pointer points to <code>ring[i]</code>, at least <code>dp(ring, i, key, j)</code> operations are needed to input the string <code>key[j..]</code>.</strong> <code>ring[i]</code> <code>dp(ring, i, key, j)</code> <code>key[j..]</code> <p>According to this definition, the problem is essentially asking to calculate the value of <code>dp(ring, 0, key, 0)</code>, and we can write the base case of the <code>dp</code> function:</p> <code>dp(ring, 0, key, 0)</code> <code>dp</code> <div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-204-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-204-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-204-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div> <div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-204-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-4\" aria-selected=\"false\">javascript</button></div> <button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-204-0\" aria-selected=\"true\">java</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-1\" aria-selected=\"false\">cpp</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-2\" aria-selected=\"false\">python</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-3\" aria-selected=\"false\">go</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-204-4\" aria-selected=\"false\">javascript</button> <div class=\"vp-code-tab active\" id=\"codetab-204-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">java</div> <div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-204-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">cpp</div> <div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is completed</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-204-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">python</div> <div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">def</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # base case, input completed</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # ...</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-204-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">go</div> <div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input is complete</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-204-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">javascript</div> <div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case, input completed</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> === </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // ...</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <p>Next, consider how to make choices based on the state and how to transition between states.</p> <p><strong>\"Choice\" refers to \"how to move the pointer to obtain the desired input character.\"</strong></p> <strong>\"Choice\" refers to \"how to move the pointer to obtain the desired input character.\"</strong> <p>Specifically, for the character <code>key[j]</code> that you want to input, how can the dial be moved to get this character?</p> <code>key[j]</code> <p>For example, if the input is <code>ring = \"gdonidg\"</code>, the state of the dial is shown below:</p> <code>ring = \"gdonidg\"</code> <div class=\"img-content\"><img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div> <img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"> <p>Assume the character you want to input is <code>key[j] = \"d\"</code>. There are two letters <code>\"d\"</code> on the dial, and you can move the pointer clockwise or counterclockwise. Therefore, there are four \"choices\" to input the character <code>\"d\"</code>, and we need to choose the method with the least number of operations.</p> <code>key[j] = \"d\"</code> <code>\"d\"</code> <code>\"d\"</code> <p>The general code logic is as follows:</p> <div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished input</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make a choice</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">    int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [all indices of character key[j] in ring]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i clockwise to k,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i counterclockwise to k</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished input</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make a choice</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">    int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [all indices of character key[j] in ring]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i clockwise to k,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i counterclockwise to k</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished input</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make a choice</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">    int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [all indices of character key[j] in ring]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i clockwise to k,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i counterclockwise to k</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> ring, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> key, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished input</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished input</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make a choice</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make a choice</span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">    int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">    int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [all indices of character key[j] in ring]) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [all indices of character key[j] in ring]) {</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i clockwise to k,</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i clockwise to k,</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i counterclockwise to k</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            cost of rotating i counterclockwise to k</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        );</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        );</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    </span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <p>As for whether to move clockwise or counterclockwise, it's straightforward to decide; just choose the closer direction. However, for the two characters <code>\"d\"</code> on the dial, can you still choose the closer one?</p> <code>\"d\"</code> <p>No, because it depends on the character that needs to be input after <code>key[i]</code>. Consider the previous example:</p> <code>key[i]</code> <div class=\"img-content\"><img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"></div> <img src=\"/algo/images/ring/4.jpeg\" alt class=\"myimage\" loading=\"lazy\" photo-swipe=\"\"> <p>If the input is <code>key = \"di\"</code>, even if the right <code>\"d\"</code> is closer, you should choose the left <code>\"d\"</code> because the <code>\"i\"</code> is right next to the left <code>\"d\"</code>, resulting in fewer overall operations.</p> <code>key = \"di\"</code> <code>\"d\"</code> <code>\"d\"</code> <code>\"i\"</code> <code>\"d\"</code> <p>So, how should it be determined? Essentially, it's brute-force search. Recursively call the <code>dp</code> function to calculate the \"overall\" cost of both choices, then compare them.</p> <code>dp</code> <p>That's about it. Let's look at the final code:</p> <div class=\"vp-code-tabs\"><div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-257-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-4\" aria-selected=\"false\">javascript</button></div><!--[--><div class=\"vp-code-tab active\" id=\"codetab-257-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><div class=\"vp-code-tab\" id=\"codetab-257-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div><!--]--></div> <div class=\"vp-code-tabs-nav\" role=\"tablist\"><button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-257-0\" aria-selected=\"true\">java</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-1\" aria-selected=\"false\">cpp</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-2\" aria-selected=\"false\">python</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-3\" aria-selected=\"false\">go</button><button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-4\" aria-selected=\"false\">javascript</button></div> <button type=\"button\" class=\"vp-code-tab-nav active\" role=\"tab\" aria-controls=\"codetab-257-0\" aria-selected=\"true\">java</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-1\" aria-selected=\"false\">cpp</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-2\" aria-selected=\"false\">python</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-3\" aria-selected=\"false\">go</button> <button type=\"button\" class=\"vp-code-tab-nav\" role=\"tab\" aria-controls=\"codetab-257-4\" aria-selected=\"false\">javascript</button> <div class=\"vp-code-tab active\" id=\"codetab-257-0\" role=\"tabpanel\" aria-expanded=\"true\"><div class=\"vp-code-tab-title\">java</div><!--[--><div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">java</div> <div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Map</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Character</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">List</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">Integer</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> HashMap</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;();</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[][] </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    public</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> m</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[m][n];</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            char</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">containsKey</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c)) {</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">                charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">put</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c, </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">new</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> ArrayList</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;&gt;());</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            }</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(c).</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">add</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    private</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">String</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (memo[i][j] != </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> memo[i][j];</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">        int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Integer</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">MAX_VALUE</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\"> :</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">get</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">charAt</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(j))) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span> <span class=\"line\"><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">            int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo[i][j] = res;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-257-1\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">cpp</div><!--[--><div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">cpp</div> <div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span> <span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;unordered_map&gt;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span> <span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;vector&gt;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span> <span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;string&gt;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span> <span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;algorithm&gt;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">#include</span> <span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\"> &lt;limits&gt;</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">using</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> namespace</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> std</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    unordered_map&lt;</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">char</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, vector&lt;</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; charToIndex;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    vector&lt;vector&lt;</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt; memo;</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">const</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">&amp;</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (j == </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">()) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] != </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j];</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res = </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">numeric_limits</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;::</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">max</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k : </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[j]]) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> delta = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> subProblem = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, k, key, j + </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i][j] = res;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res;</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">public:</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    int</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">string</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> m = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> n = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">();</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // initialize all memoization entries to 0</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        memo = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">vector</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;&gt;(m, </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">vector</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&lt;</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">&gt;(n, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">));</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // record the mapping of characters to indices on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i = </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; i &lt; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">size</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(); i++) {</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            char</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[i];</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[c].</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push_back</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(i);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // the initial pointer of the ring points at the 12 o'clock direction,</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // start inputting the key from the first character</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-257-2\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">python</div><!--[--><div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">python</div> <div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">class</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> Solution</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # character -&gt; index list</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> __init__</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">):</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex = {}</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # memoization</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = []</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # main function</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        m = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # initialize all memoization entries to 0</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo = [[</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] * n </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> _ </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> range</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(m)]</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # record the mapping of characters to indices on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> i, c </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> enumerate</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring):</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> c </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">not</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> in</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex:</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">                self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c] = []</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[c].append(i)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # the initial pointer of the ring points at the 12 o'clock direction,</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # start inputting the key from the first character</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, key, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # calculate the minimum number of operations when</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    # the pointer is at ring[i] and inputting key[j..]</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    def</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">str</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">: </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) -&gt; </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # base case: finished inputting</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> j == </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(key):</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # check the memoization to avoid overlapping subproblems</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] != </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">:</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">            return</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j]</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        n = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(ring)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # make choices</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        res = </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">float</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#A31515;--shiki-dark:#CE9178;\">'inf'</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # there might be multiple characters key[j] on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> k </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">in</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.charToIndex[key[j]]:</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # number of times to move the pointer</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(k - i)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose clockwise or counterclockwise</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            delta = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(delta, n - delta)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # move the pointer to ring[k] and continue inputting key[j+1..]</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            subProblem = </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.dp(ring, k, key, j + </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # choose the overall minimum number of operations</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            # add one because pressing the button is also an operation</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">            res = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(res, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + delta + subProblem)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        # store the result in the memoization table</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        self</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.memo[i][j] = res</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> res</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-257-3\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">go</div><!--[--><div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">go</div> <div class=\"language-go line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"go\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// main function</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">map</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([][]</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">make</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">([]</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">))</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">append</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">], </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// calculate the minimum number of operations when</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// the pointer is at ring[i] and inputting key[j..]</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> string</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> map</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][]</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> [][]</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // base case: finished inputting</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // check the memoization to avoid overlapping subproblems</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    n</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">len</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // make choices</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(^</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">uint</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) &gt;&gt; </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">// Initialize res to the maximum int value</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // there might be multiple characters key[j] on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> _</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">range</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">rune</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">])] {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // number of times to move the pointer</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose clockwise or counterclockwise</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // move the pointer to ring[k] and continue inputting key[j+1..]</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        subProblem</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> := </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // choose the overall minimum number of operations</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // add one because pressing the button is also an operation</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">)</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // store the result in the memoization table</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">    memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">b</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> b</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">func</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> abs</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\"> int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#267F99;--shiki-dark:#4EC9B0;\">int</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    if</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> {</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> -</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">a</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> a</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">}</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"vp-code-tab\" id=\"codetab-257-4\" role=\"tabpanel\" aria-expanded=\"false\"><div class=\"vp-code-tab-title\">javascript</div><!--[--><div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><!--]--></div> <div class=\"vp-code-tab-title\">javascript</div> <div class=\"language-javascript line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"javascript\" style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;\"><pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre><div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div> <pre class=\"shiki shiki-themes light-plus dark-plus vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code></pre> <code><span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span></code> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">var</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> findRotateSteps</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">function</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // character -&gt; index list</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = {};</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // memoization</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = [];</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // record the mapping of characters to indices on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (!</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]) {</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = [];</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">c</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">].</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">push</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // initialize all memoization entries to 0</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> &lt; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">; </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">++) {</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">Array</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">).</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">fill</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // main function</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // the initial pointer of the ring points at the 12 o'clock direction,</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // start inputting the key from the first character</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">    return</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // calculate the minimum number of operations when the</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">    // pointer is at ring[i] and inputting key[j..]</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">    function</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\"> dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // base case: finished inputting</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> == </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\"> 0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // check the memoization to avoid overlapping subproblems</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        if</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] != </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">0</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">) </span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">];</span> <span class=\"line\"></span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> n</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">ring</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">length</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // make choices</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">        let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Number</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.MAX_VALUE;</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // there might be multiple characters key[j] on the ring</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        for</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> (</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> k</span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\"> of</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> charToIndex</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">key</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">]]) {</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // number of times to move the pointer</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">abs</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose clockwise or counterclockwise</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">n</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> - </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // move the pointer to ring[k] and continue inputting key[j+1..]</span> <span class=\"line\"><span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#0000FF;--shiki-dark:#569CD6;\">            let</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> subProblem</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">dp</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">k</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // choose the overall minimum number of operations</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">            // add one because pressing the button is also an operation</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span><span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span><span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">            res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">Math</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">.</span> <span style=\"--shiki-light:#795E26;--shiki-dark:#DCDCAA;\">min</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">(</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">, </span> <span style=\"--shiki-light:#098658;--shiki-dark:#B5CEA8;\">1</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">delta</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\"> + </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">subProblem</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">);</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">        }</span> <span class=\"line\"><span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span></span> <span style=\"--shiki-light:#008000;--shiki-dark:#6A9955;\">        // store the result in the memoization table</span> <span class=\"line\"><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">        memo</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">[</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">i</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">][</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">j</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">] = </span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\">res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span><span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span></span> <span style=\"--shiki-light:#AF00DB;--shiki-dark:#C586C0;\">        return</span> <span style=\"--shiki-light:#001080;--shiki-dark:#9CDCFE;\"> res</span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">;</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">    }</span> <span class=\"line\"><span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span></span> <span style=\"--shiki-light:#000000;--shiki-dark:#D4D4D4;\">};</span> <div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0;\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div class=\"line-number\"></div> <div data-v-ee1a9bd0><a style=\"display:none;\" href=\"\" data-v-ee1a9bd0> Algorithm visualize </a><details id=\"div_freedom-trail\" class=\"hint-container details\" data-v-ee1a9bd0><summary style=\"font-size:large;\" data-v-ee1a9bd0><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z\" opacity=\"0.3\" data-v-ee1a9bd0></path><path fill=\"currentColor\" d=\"m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z\" data-v-ee1a9bd0></path></svg> Â  <strong data-v-ee1a9bd0>Algorithm Visualization</strong><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.9em\" height=\"0.9em\" viewbox=\"0 0 24 24\" style=\"margin-left:auto;margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" style=\"margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z\" data-v-ee1a9bd0></path></svg><span style=\"display:none;\" class=\"copy-feedback\" data-v-ee1a9bd0>Link copied!</span></summary><div class=\"resizable\" style=\"height:70vh;\" data-v-ee1a9bd0><iframe title=\"algo-visualize panel\" allow=\"clipboard-write; fullscreen;\" id=\"iframe_freedom-trail\" src=\"\" width=\"100%\" height=\"100%\" loading=\"lazy\" scrolling=\"auto\" frameborder=\"0\" style=\"overflow:auto;\" data-v-ee1a9bd0></iframe></div></details></div> <a style=\"display:none;\" href=\"\" data-v-ee1a9bd0> Algorithm visualize </a> <details id=\"div_freedom-trail\" class=\"hint-container details\" data-v-ee1a9bd0><summary style=\"font-size:large;\" data-v-ee1a9bd0><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z\" opacity=\"0.3\" data-v-ee1a9bd0></path><path fill=\"currentColor\" d=\"m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z\" data-v-ee1a9bd0></path></svg> Â  <strong data-v-ee1a9bd0>Algorithm Visualization</strong><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.9em\" height=\"0.9em\" viewbox=\"0 0 24 24\" style=\"margin-left:auto;margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" style=\"margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z\" data-v-ee1a9bd0></path></svg><span style=\"display:none;\" class=\"copy-feedback\" data-v-ee1a9bd0>Link copied!</span></summary><div class=\"resizable\" style=\"height:70vh;\" data-v-ee1a9bd0><iframe title=\"algo-visualize panel\" allow=\"clipboard-write; fullscreen;\" id=\"iframe_freedom-trail\" src=\"\" width=\"100%\" height=\"100%\" loading=\"lazy\" scrolling=\"auto\" frameborder=\"0\" style=\"overflow:auto;\" data-v-ee1a9bd0></iframe></div></details> <summary style=\"font-size:large;\" data-v-ee1a9bd0><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z\" opacity=\"0.3\" data-v-ee1a9bd0></path><path fill=\"currentColor\" d=\"m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z\" data-v-ee1a9bd0></path></svg> Â  <strong data-v-ee1a9bd0>Algorithm Visualization</strong><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.9em\" height=\"0.9em\" viewbox=\"0 0 24 24\" style=\"margin-left:auto;margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" style=\"margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z\" data-v-ee1a9bd0></path></svg><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z\" data-v-ee1a9bd0></path></svg><span style=\"display:none;\" class=\"copy-feedback\" data-v-ee1a9bd0>Link copied!</span></summary> <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z\" opacity=\"0.3\" data-v-ee1a9bd0></path><path fill=\"currentColor\" d=\"m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z\" data-v-ee1a9bd0></path></svg> <path fill=\"currentColor\" d=\"m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z\" opacity=\"0.3\" data-v-ee1a9bd0></path> <path fill=\"currentColor\" d=\"m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z\" data-v-ee1a9bd0></path> <strong data-v-ee1a9bd0>Algorithm Visualization</strong> <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.9em\" height=\"0.9em\" viewbox=\"0 0 24 24\" style=\"margin-left:auto;margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z\" data-v-ee1a9bd0></path></svg> <path fill=\"currentColor\" d=\"M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z\" data-v-ee1a9bd0></path> <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" style=\"margin-right:10px;\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z\" data-v-ee1a9bd0></path></svg> <path fill=\"currentColor\" d=\"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z\" data-v-ee1a9bd0></path> <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewbox=\"0 0 24 24\" data-v-ee1a9bd0><path fill=\"currentColor\" d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z\" data-v-ee1a9bd0></path></svg> <path fill=\"currentColor\" d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z\" data-v-ee1a9bd0></path> <span style=\"display:none;\" class=\"copy-feedback\" data-v-ee1a9bd0>Link copied!</span> <div class=\"resizable\" style=\"height:70vh;\" data-v-ee1a9bd0><iframe title=\"algo-visualize panel\" allow=\"clipboard-write; fullscreen;\" id=\"iframe_freedom-trail\" src=\"\" width=\"100%\" height=\"100%\" loading=\"lazy\" scrolling=\"auto\" frameborder=\"0\" style=\"overflow:auto;\" data-v-ee1a9bd0></iframe></div> <iframe title=\"algo-visualize panel\" allow=\"clipboard-write; fullscreen;\" id=\"iframe_freedom-trail\" src=\"\" width=\"100%\" height=\"100%\" loading=\"lazy\" scrolling=\"auto\" frameborder=\"0\" style=\"overflow:auto;\" data-v-ee1a9bd0></iframe> <footer class=\"vp-page-meta\"><!----><div class=\"vp-meta-item git-info\"><div class=\"update-time\"><span class=\"vp-meta-label\">Last Updated:</span><time class=\"vp-meta-info\" datetime=\"2025-07-21T03:29:25.280Z\" data-allow-mismatch>7/21/25, 11:29 AM</time></div><!----></div></footer> <div class=\"vp-meta-item git-info\"><div class=\"update-time\"><span class=\"vp-meta-label\">Last Updated:</span><time class=\"vp-meta-info\" datetime=\"2025-07-21T03:29:25.280Z\" data-allow-mismatch>7/21/25, 11:29 AM</time></div><!----></div> <div class=\"update-time\"><span class=\"vp-meta-label\">Last Updated:</span><time class=\"vp-meta-info\" datetime=\"2025-07-21T03:29:25.280Z\" data-allow-mismatch>7/21/25, 11:29 AM</time></div> <span class=\"vp-meta-label\">Last Updated:</span> <time class=\"vp-meta-info\" datetime=\"2025-07-21T03:29:25.280Z\" data-allow-mismatch>7/21/25, 11:29 AM</time> <nav class=\"vp-page-nav\"><a class=\"route-link auto-link prev\" href=\"/algo/en/dynamic-programming/magic-tower/\" aria-label=\"Play Dungeon Game with DP\"><div class=\"hint\"><span class=\"arrow start\"></span>Prev</div><div class=\"link\"><!---->Play Dungeon Game with DP</div></a><a class=\"route-link auto-link next\" href=\"/algo/en/dynamic-programming/cheap-travel/\" aria-label=\"Save Money on Your Trip: Weighted Shortest Path\"><div class=\"hint\">Next<span class=\"arrow end\"></span></div><div class=\"link\">Save Money on Your Trip: Weighted Shortest Path<!----></div></a></nav> <a class=\"route-link auto-link prev\" href=\"/algo/en/dynamic-programming/magic-tower/\" aria-label=\"Play Dungeon Game with DP\"><div class=\"hint\"><span class=\"arrow start\"></span>Prev</div><div class=\"link\"><!---->Play Dungeon Game with DP</div></a> <div class=\"hint\"><span class=\"arrow start\"></span>Prev</div> <span class=\"arrow start\"></span> <div class=\"link\"><!---->Play Dungeon Game with DP</div> <a class=\"route-link auto-link next\" href=\"/algo/en/dynamic-programming/cheap-travel/\" aria-label=\"Save Money on Your Trip: Weighted Shortest Path\"><div class=\"hint\">Next<span class=\"arrow end\"></span></div><div class=\"link\">Save Money on Your Trip: Weighted Shortest Path<!----></div></a> <div class=\"hint\">Next<span class=\"arrow end\"></span></div> <span class=\"arrow end\"></span> <div class=\"link\">Save Money on Your Trip: Weighted Shortest Path<!----></div> <div style=\"justify-content:center;display:flex;\" data-v-95bd7423><div class=\"artalkCommentsContainer\" data-v-95bd7423><div id=\"artalkComments\" style=\"display:none;\" data-v-95bd7423></div><div style=\"margin-bottom:10px;\" data-v-95bd7423><!----></div></div></div> <div class=\"artalkCommentsContainer\" data-v-95bd7423><div id=\"artalkComments\" style=\"display:none;\" data-v-95bd7423></div><div style=\"margin-bottom:10px;\" data-v-95bd7423><!----></div></div> <div id=\"artalkComments\" style=\"display:none;\" data-v-95bd7423></div> <div style=\"margin-bottom:10px;\" data-v-95bd7423><!----></div>"
}